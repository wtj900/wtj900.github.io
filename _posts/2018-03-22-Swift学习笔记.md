---
layout:     post
title:      Swiftæ•™ç¨‹
subtitle: Â  ä¸€è·¯å­¦ä¹ å¿ƒå¾—
date: Â  Â  Â  2018-03-22
author:     JT
header-img: img/post-bg-swift-logo.jpg
catalog:    true
tags:
    - Swift
---

## åŸºç¡€å†…å®¹

Swift æ˜¯ä¸€é—¨å…¨æ–°çš„ç”¨äºå¼€å‘ iOS, OS X ä»¥åŠ watchOS åº”ç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æœ‰ C æˆ–è€…Objective-C è¯­è¨€å¼€å‘ç»éªŒçš„è¯ï¼ŒSwift çš„è®¸å¤šåœ°æ–¹éƒ½ä¼šè®©ä½ æ„Ÿåˆ°ç†Ÿæ‚‰ã€‚

Swift ä¸ºæ‰€æœ‰ C å’Œ Objective-C çš„ç±»å‹æä¾›äº†è‡ªå·±çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æ•´å‹å€¼çš„ Int ï¼Œæµ®ç‚¹æ•°å€¼çš„ Double å’Œ Float ï¼Œå¸ƒå°”é‡å€¼çš„ Bool ï¼Œå­—ç¬¦ä¸²å€¼çš„ String ã€‚å¦‚åŒé›†åˆç±»å‹ä¸­æè¿°çš„é‚£æ ·ï¼Œ Swift åŒæ ·ä¹Ÿä¸ºä¸‰ä¸ªä¸»è¦çš„é›†åˆç±»å‹æä¾›äº†æ›´é«˜æ•ˆçš„ç‰ˆæœ¬ï¼Œ Array ï¼Œ Set å’Œ Dictionary ã€‚

å’Œ C ä¸€æ ·ï¼ŒSwift ç”¨å˜é‡å­˜å‚¨å’Œè°ƒç”¨å€¼ï¼Œé€šè¿‡å˜é‡åæ¥åšåŒºåˆ†ã€‚Swift ä¸­ä¹Ÿå¤§é‡é‡‡ç”¨äº†å€¼ä¸å¯å˜çš„å˜é‡ï¼Œå®ƒä»¬å°±æ˜¯æ‰€è°“çš„å¸¸é‡ï¼Œä½†æ˜¯å®ƒä»¬æ¯” C ä¸­çš„å¸¸é‡æ›´åŠ ç»™åŠ›ã€‚å½“ä½ æ‰€å¤„ç†çš„å€¼ä¸éœ€è¦æ›´æ”¹æ—¶ï¼Œä½¿ç”¨å¸¸é‡ä¼šè®©ä½ çš„ä»£ç æ›´åŠ å®‰å…¨ã€ç®€æ´åœ°è¡¨è¾¾ä½ çš„æ„å›¾ã€‚

é™¤äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„ç±»å‹ä»¥å¤–ï¼ŒSwift è¿˜å¢åŠ äº† Objective-C ä¸­æ²¡æœ‰çš„ç±»å‹ï¼Œæ¯”å¦‚å…ƒç»„ã€‚å…ƒç»„å…è®¸ä½ æ¥åˆ›å»ºå’Œä¼ é€’ä¸€ç»„æ•°æ®ã€‚ä½ å¯ä»¥åˆ©ç”¨å…ƒç»„åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ä»¥å•ä¸ªå¤åˆå€¼çš„å½¢å¼è¿”å›å¤šä¸ªå€¼ã€‚

Swift è¿˜å¢åŠ äº†å¯é€‰é¡¹ï¼Œç”¨æ¥å¤„ç†æ²¡æœ‰å€¼çš„æƒ…å†µã€‚å¯é€‰é¡¹æ„å‘³ç€è¦ä¹ˆâ€œè¿™é‡Œæœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒç­‰äº xâ€è¦ä¹ˆâ€œè¿™é‡Œæ ¹æœ¬æ²¡æœ‰å€¼â€ã€‚å¯é€‰é¡¹ç±»ä¼¼äº Objective-C ä¸­çš„ nil æŒ‡é’ˆï¼Œä½†æ˜¯ä¸åªæ˜¯ç±»ï¼Œå¯é€‰é¡¹ä¹Ÿå¯ä»¥ç”¨åœ¨æ‰€æœ‰çš„ç±»å‹ä¸Šã€‚å¯é€‰é¡¹æ¯” Objective-C ä¸­çš„ nil æŒ‡é’ˆæ›´å®‰å…¨ã€æ›´æ˜“è¯»ï¼Œä»–ä¹Ÿæ˜¯ Swift è¯­è¨€ä¸­è®¸å¤šé‡è¦åŠŸèƒ½çš„æ ¸å¿ƒã€‚

å¯é€‰é¡¹å……åˆ†è¯æ˜äº† Swift æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ã€‚Swift å¸®åŠ©ä½ æ˜ç¡®ä»£ç å¯ä»¥æ“ä½œå€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä¸€æ®µä»£ç é¢„æœŸå¾—åˆ°ä¸€ä¸ª String ï¼Œç±»å‹ä¼šå®‰å…¨åœ°é˜»æ­¢ä½ ä¸å°å¿ƒä¼ å…¥ Int ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªé™åˆ¶èƒ½å¸®åŠ©ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ›´æ—©åœ°å‘ç°å¹¶ä¿®å¤é”™è¯¯ã€‚

### 1 å¸¸é‡å’Œå˜é‡

å¸¸é‡å’Œå˜é‡æŠŠåå­—ï¼ˆä¾‹å¦‚ `maximumNumberOfLoginAttempts` æˆ–è€… `welcomeMessage` ï¼‰å’Œä¸€ä¸ªç‰¹å®šç±»å‹çš„å€¼ï¼ˆä¾‹å¦‚æ•°å­— `10` æˆ–è€…å­—ç¬¦ä¸² `â€œHelloâ€`ï¼‰å…³è”èµ·æ¥ã€‚å¸¸é‡çš„å€¼ä¸€æ—¦è®¾ç½®å¥½ä¾¿ä¸èƒ½å†è¢«æ›´æ”¹ï¼Œç„¶è€Œå˜é‡å¯ä»¥åœ¨å°†æ¥è¢«è®¾ç½®ä¸ºä¸åŒçš„å€¼ã€‚

#### 1.1 å£°æ˜å¸¸é‡å’Œå˜é‡

å¸¸é‡å’Œå˜é‡å¿…é¡»åœ¨ä½¿ç”¨å‰è¢«å£°æ˜ï¼Œä½¿ç”¨å…³é”®å­— `let` æ¥å£°æ˜å¸¸é‡ï¼Œä½¿ç”¨å…³é”®å­— `var` æ¥å£°æ˜å˜é‡ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå¦‚ä½•åˆ©ç”¨å¸¸é‡å’Œå˜é‡è®°å½•ç”¨æˆ·ç™»å½•æ¬¡æ•°çš„æ —å­ï¼š

```swift
let maximumNumberOfLoginAttempts = 10 
var currentLoginAttempt = 0
```

è¿™æ®µä»£ç å¯ä»¥è¯»ä½œï¼š

â€œå£°æ˜ä¸€ä¸ªå«åš maximumNumberOfLoginAttempts çš„æ–°å¸¸é‡ï¼Œå¹¶è®¾ç½®å€¼ä¸º 10 ã€‚ç„¶åå£°æ˜ä¸€ä¸ªå«åš currentLoginAttempt çš„æ–°å˜é‡, å¹¶ä¸”ç»™ä»–ä¸€ä¸ªåˆå§‹å€¼ 0ã€‚â€

åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œç™»å½•æ¬¡æ•°å…è®¸çš„æœ€å¤§å€¼è¢«å£°æ˜ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå› ä¸ºæœ€å¤§å€¼æ°¸è¿œä¸ä¼šæ›´æ”¹ã€‚å½“å‰å°è¯•ç™»å½•çš„æ¬¡æ•°è¢«å£°æ˜ä¸ºä¸€ä¸ªå˜é‡ï¼Œå› ä¸ºè¿™ä¸ªå€¼åœ¨æ¯æ¬¡ç™»å½•å°è¯•å¤±è´¥ä¹‹åä¼šé€’å¢ã€‚

ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­å£°æ˜å¤šä¸ªå˜é‡æˆ–å¸¸é‡ï¼Œç”¨é€—å·åˆ†éš”ï¼š

```swift
var x = 0.0, y = 0.0, z = 0.0
var a = 0, b = "0", c = true
```

> åœ¨ä½ çš„ä»£ç ä¸­ï¼Œå¦‚æœå­˜å‚¨çš„å€¼ä¸ä¼šæ”¹å˜ï¼Œè¯·ç”¨ let å…³é”®å­—å°†ä¹‹å£°æ˜ä¸ºä¸€ä¸ªå¸¸é‡ã€‚åªæœ‰å‚¨å­˜ä¼šæ”¹å˜çš„å€¼æ—¶æ‰ä½¿ç”¨å˜é‡ã€‚

#### 1.2 ç±»å‹æ ‡æ³¨

ä½ å¯ä»¥åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æˆ–å¸¸é‡çš„æ—¶å€™æä¾›ç±»å‹æ ‡æ³¨ï¼Œæ¥æ˜ç¡®å˜é‡æˆ–å¸¸é‡èƒ½å¤Ÿå‚¨å­˜å€¼çš„ç±»å‹ã€‚æ·»åŠ ç±»å‹æ ‡æ³¨çš„æ–¹æ³•æ˜¯åœ¨å˜é‡æˆ–å¸¸é‡çš„åå­—åè¾¹åŠ ä¸€ä¸ªå†’å·ï¼Œå†è·Ÿä¸€ä¸ªç©ºæ ¼ï¼Œæœ€ååŠ ä¸Šè¦ä½¿ç”¨çš„ç±»å‹åç§°ã€‚

ä¸‹é¢è¿™ä¸ªæ —å­ç»™ä¸€ä¸ªå«åš welcomeMessage çš„å˜é‡æ·»åŠ äº†ç±»å‹æ ‡æ³¨ï¼Œæ˜ç¡®è¿™ä¸ªå˜é‡å¯ä»¥å­˜å‚¨ String ç±»å‹çš„å€¼ã€‚

```swift
var welcomeMessage: String
```

å£°æ˜ä¸­çš„å†’å·çš„æ„æ€æ˜¯â€œæ˜¯â€¦ç±»å‹â€ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¯ä»¥è¯»ä½œï¼š

â€œå£°æ˜ä¸€ä¸ªå«åš welcomMessage çš„å˜é‡ï¼Œä»–çš„ç±»å‹æ˜¯ String â€

æˆ‘ä»¬è¯´â€œç±»å‹æ˜¯ String â€å°±æ„å‘³ç€â€œå¯ä»¥å­˜å‚¨ä»»ä½• String å€¼â€ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºâ€œè¿™ç±»ä¸œè¥¿â€ï¼ˆæˆ–è€…â€œè¿™ç§ä¸œè¥¿â€ï¼‰å¯ä»¥è¢«å­˜å‚¨è¿›å»ã€‚

ç°åœ¨è¿™ä¸ª welcomeMessage å˜é‡å°±å¯ä»¥è¢«è®¾ç½®åˆ°ä»»ä½•å­—ç¬¦ä¸²ä¸­è€Œä¸ä¼šæŠ¥é”™äº†ï¼š

```swift
welcomeMessage = "Hello"
```

ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­å®šä¹‰å¤šä¸ªç›¸å…³çš„å˜é‡ä¸ºç›¸åŒçš„ç±»å‹ï¼Œç”¨é€—å·åˆ†éš”ï¼Œåªè¦åœ¨æœ€åçš„å˜é‡åå­—åè¾¹åŠ ä¸Šç±»å‹æ ‡æ³¨ã€‚

```swift
var red, green, blue: Double
```

> å®é™…ä¸Šï¼Œä½ å¹¶ä¸éœ€è¦ç»å¸¸ä½¿ç”¨ç±»å‹æ ‡æ³¨ã€‚å¦‚æœä½ åœ¨å®šä¹‰ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™å°±ç»™ä»–è®¾å®šä¸€ä¸ªåˆå§‹å€¼ï¼Œé‚£ä¹ˆ Swift å°±åƒç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­ä¸­æè¿°çš„é‚£æ ·ï¼Œå‡ ä¹éƒ½å¯ä»¥æ¨æ–­å‡ºè¿™ä¸ªå¸¸é‡æˆ–å˜é‡çš„ç±»å‹ã€‚åœ¨ä¸Šé¢ welcomeMessage çš„æ —å­ä¸­ï¼Œæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œæ‰€ä»¥ welcomeMessage è¿™ä¸ªå˜é‡ä½¿ç”¨äº†ç±»å‹æ ‡æ³¨æ¥æ˜ç¡®å®ƒçš„ç±»å‹è€Œä¸æ˜¯é€šè¿‡åˆå§‹å€¼çš„ç±»å‹æ¨æ–­å‡ºæ¥çš„ã€‚

#### 1.3 å‘½åå¸¸é‡å’Œå˜é‡

å¸¸é‡å’Œå˜é‡çš„åå­—å‡ ä¹å¯ä»¥ä½¿ç”¨ä»»ä½•å­—ç¬¦ï¼Œç”šè‡³åŒ…æ‹¬ Unicode å­—ç¬¦ï¼š

```swift
let Ï€ = 3.14159
let ä½ å¥½ = "ä½ å¥½ä¸–ç•Œ"
let ğŸ¶ğŸ® = "dogcow"
```

å¸¸é‡å’Œå˜é‡çš„åå­—ä¸èƒ½åŒ…å«ç©ºç™½å­—ç¬¦ã€æ•°å­¦ç¬¦å·ã€ç®­å¤´ã€ä¿ç•™çš„ï¼ˆæˆ–è€…æ— æ•ˆçš„ï¼‰Unicode ç ä½ã€è¿çº¿å’Œåˆ¶è¡¨ç¬¦ã€‚ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œå°½ç®¡æ•°å­—å‡ ä¹å¯ä»¥ä½¿ç”¨åœ¨åå­—å…¶ä»–çš„ä»»ä½•åœ°æ–¹ã€‚

ä¸€æ—¦ä½ å£°æ˜äº†ä¸€ä¸ªç¡®å®šç±»å‹çš„å¸¸é‡æˆ–è€…å˜é‡ï¼Œå°±ä¸èƒ½ä½¿ç”¨ç›¸åŒçš„åå­—å†æ¬¡è¿›è¡Œå£°æ˜ï¼Œä¹Ÿä¸èƒ½è®©å®ƒæ”¹å­˜å…¶ä»–ç±»å‹çš„å€¼ã€‚å¸¸é‡å’Œå˜é‡ä¹‹é—´ä¹Ÿä¸èƒ½äº’æ¢ã€‚

å¦‚æœä½ éœ€è¦ä½¿ç”¨ Swift ä¿ç•™çš„å…³é”®å­—æ¥ç»™å¸¸é‡æˆ–å˜é‡å‘½åï¼Œå¯ä»¥ä½¿ç”¨åå¼•å·ï¼ˆ ` ï¼‰åŒ…å›´å®ƒæ¥ä½œä¸ºåç§°ã€‚æ€»ä¹‹ï¼Œé™¤éåˆ«æ— é€‰æ‹©ï¼Œé¿å…ä½¿ç”¨å…³é”®å­—ä½œä¸ºåå­—é™¤éä½ ç¡®å®åˆ«æ— é€‰æ‹©ã€‚

ä½ å¯ä»¥æŠŠç°æœ‰å˜é‡çš„å€¼æ›´æ”¹ä¸ºå…¶ä»–ç›¸åŒç±»å‹çš„å€¼ã€‚åœ¨è¿™ä¸ªæ —å­ä¸­ friendlyWelcome  çš„å€¼ä» â€œHello!â€ æ”¹å˜ä¸º â€œBonjour!â€

```swift
var friendlyWelcome = "Hello!"
friendlyWelcome = "Bonjour!"
// friendlyWelcome ç°åœ¨æ˜¯ "Bonjour!"
```

ä¸åŒäºå˜é‡ï¼Œå¸¸é‡çš„å€¼ä¸€æ—¦è®¾å®šåˆ™ä¸èƒ½å†è¢«æ”¹å˜ã€‚å°è¯•è¿™ä¹ˆåšå°†ä¼šåœ¨ä½ ä»£ç ç¼–è¯‘æ—¶å¯¼è‡´æŠ¥é”™ï¼š

```swift
let languageName = "Swift"
languageName = "Swift++"
// this is a compile-time error - languageName cannot be changed
```

#### 1.4 è¾“å‡ºå¸¸é‡å’Œå˜é‡

ä½ å¯ä»¥ä½¿ç”¨ `print(_:separator:terminator:)` å‡½æ•°æ¥æ‰“å°å½“å‰å¸¸é‡å’Œå˜é‡ä¸­çš„å€¼ã€‚

```swift
print(friendlyWelcome)
// è¾“å‡º "Bonjour!"
```

`print(_:separator:terminator:)` æ˜¯ä¸€ä¸ªç”¨æ¥æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ç”¨åˆé€‚çš„æ–¹å¼è¾“å‡ºçš„å…¨å±€å‡½æ•°ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨ Xcode ä¸­ `print(_:separator:terminator:)` å‡½æ•°è¾“å‡ºçš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨Xcodeçš„ â€œconsoleâ€ é¢æ¿ä¸Šã€‚ **separator(å¤šä¸ªè¾“å‡ºä¸­é—´çš„åˆ†éš”ç¬¦) å’Œ terminatorï¼ˆè¾“å‡ºå€¼æœ«å°¾çš„å­—ç¬¦ï¼‰** å½¢å¼å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™å¿½ç•¥å®ƒä»¬ã€‚é»˜è®¤æ¥è¯´ï¼Œå‡½æ•°é€šè¿‡åœ¨è¡Œæœ«å°¾æ·»åŠ æ¢è¡Œç¬¦æ¥ç»“æŸè¾“å‡ºã€‚è¦æƒ³è¾“å‡ºä¸å¸¦æ¢è¡Œç¬¦çš„å€¼ï¼Œé‚£å°±ä¼ ä¸€ä¸ªç©ºçš„æ¢è¡Œç¬¦ä½œä¸ºç»“æŸâ€”â€”æ¯”å¦‚è¯´ï¼Œ `print(someValue, terminator: "")` ã€‚æ›´å¤šå…³äºå¸¦æœ‰é»˜è®¤å€¼çš„å½¢å¼å‚æ•°ä¿¡æ¯ï¼Œè§é»˜è®¤å½¢å¼å‚æ•°å€¼ã€‚

Swift ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼ çš„æ–¹å¼æ¥æŠŠå¸¸é‡åæˆ–è€…å˜é‡åå½“åšå ä½ç¬¦åŠ å…¥åˆ°æ›´é•¿çš„å­—ç¬¦ä¸²ä¸­ï¼Œç„¶åè®© Swift ç”¨å¸¸é‡æˆ–å˜é‡çš„å½“å‰å€¼æ›¿æ¢è¿™äº›å ä½ç¬¦ã€‚å°†å¸¸é‡æˆ–å˜é‡åæ”¾å…¥åœ†æ‹¬å·ä¸­å¹¶åœ¨æ‹¬å·å‰ä½¿ç”¨åæ–œæ å°†å…¶è½¬ä¹‰ï¼š

```swift
print("The current value of friendlyWelcome is \(friendlyWelcome)")
// è¾“å‡º "The current value of friendlyWelcome is Bonjour!"
```

### 2 æ³¨é‡Š

ä½¿ç”¨æ³¨é‡Šæ¥å°†ä¸éœ€è¦æ‰§è¡Œçš„æ–‡æœ¬æ”¾å…¥çš„ä»£ç å½“ä¸­ï¼Œä½œä¸ºæ ‡è®°æˆ–è€…ä½ è‡ªå·±çš„æé†’ã€‚å½“ Swift ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™ä¼šå¿½ç•¥æ‰ä½ çš„æ³¨é‡Šã€‚

Swift ä¸­çš„æ³¨é‡Šå’Œ C çš„æ³¨é‡ŠåŸºæœ¬ç›¸åŒã€‚å•è¡Œæ³¨é‡Šç”¨ä¸¤ä¸ªæ–œæ å¼€å¤´ï¼ˆ // ï¼‰ï¼š
å¤šè¡Œçš„æ³¨é‡Šä»¥ä¸€ä¸ªæ–œæ åŠ ä¸€ä¸ªæ˜Ÿå·å¼€å¤´ï¼ˆ /* ï¼‰ï¼Œä»¥ä¸€ä¸ªæ˜Ÿå·åŠ æ–œæ ç»“å°¾( */ )ã€‚
å’Œ C ä¸­çš„å¤šè¡Œæ³¨é‡Šä¸åŒçš„æ˜¯ï¼Œ Swift è¯­è¨€ä¸­çš„å¤šè¡Œçš„æ³¨é‡Šå¯ä»¥å†…åµŒåœ¨å…¶å®ƒçš„å¤šè¡Œæ³¨é‡Šä¹‹ä¸­ï¼Œä½ å¯ä»¥åœ¨å¤šè¡Œæ³¨é‡Šä¸­å…ˆå¼€å¯ä¸€ä¸ªæ³¨é‡Šå—ï¼Œæ¥ç€å†å¼€å¯å¦ä¸€ä¸ªæ³¨é‡Šå—ã€‚ç„¶åå…³é—­ç¬¬äºŒä¸ªæ³¨é‡Šå—ï¼Œå†å…³é—­ç¬¬ä¸€ä¸ªæ³¨é‡Šå—ã€‚

```swift
/* è¿™æ˜¯ç¬¬ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šçš„å¼€å¤´
/* è¿™æ˜¯ç¬¬äºŒä¸ªåµŒå¥—åœ¨å†…çš„æ³¨é‡Šå— */
è¿™æ˜¯ç¬¬ä¸€ä¸ªæ³¨é‡Šå—çš„ç»“å°¾*/
```

å†…åµŒå¤šè¡Œæ³¨é‡Šï¼Œå¯ä»¥ä¾¿æ·åœ°æ³¨é‡Šæ‰ä¸€å¤§æ®µä»£ç å—ï¼Œå³ä½¿è¿™æ®µä»£ç å—ä¸­å·²ç»æœ‰äº†å¤šè¡Œæ³¨é‡Šã€‚

### 3 åˆ†å·

å’Œè®¸å¤šå…¶ä»–çš„è¯­è¨€ä¸åŒï¼ŒSwift å¹¶ä¸è¦æ±‚ä½ åœ¨æ¯ä¸€å¥ä»£ç ç»“å°¾å†™åˆ†å·ï¼ˆ ; ï¼‰ï¼Œå½“ç„¶å¦‚æœä½ æƒ³å†™çš„è¯ä¹Ÿæ²¡é—®é¢˜ã€‚æ€»ä¹‹ï¼Œå¦‚æœä½ æƒ³åœ¨ä¸€è¡Œé‡Œå†™å¤šå¥ä»£ç ï¼Œåˆ†å·è¿˜æ˜¯éœ€è¦çš„ã€‚

```swift
let cat = "ğŸ±"; print(cat)
// è¾“å‡º "ğŸ±"
```

### 4 æ•´æ•°

æ•´æ•°å°±æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œæ¯”å¦‚ 42 å’Œ -23 ã€‚æ•´æ•°å¯ä»¥æ˜¯æœ‰ç¬¦å·ï¼ˆæ­£ï¼Œé›¶æˆ–è€…è´Ÿï¼‰ï¼Œæˆ–è€…æ— ç¬¦å·ï¼ˆæ­£æ•°æˆ–é›¶ï¼‰ã€‚

Swift æä¾›äº† 8ï¼Œ16ï¼Œ32 å’Œ 64 ä½ç¼–ç çš„æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ï¼Œè¿™äº›æ•´æ•°ç±»å‹çš„å‘½åæ–¹å¼å’Œ C ç›¸ä¼¼ï¼Œä¾‹å¦‚ 8 ä½æ— ç¬¦å·æ•´æ•°çš„ç±»å‹æ˜¯ UInt8 ï¼Œ32 ä½æœ‰ç¬¦å·æ•´æ•°çš„ç±»å‹æ˜¯ Int32 ã€‚ä¸ Swift ä¸­çš„å…¶ä»–ç±»å‹ç›¸åŒï¼Œè¿™äº›æ•´æ•°ç±»å‹ä¹Ÿç”¨å¼€å¤´å¤§å†™å‘½åæ³•ã€‚

#### 4.1 æ•´æ•°èŒƒå›´

ä½ å¯ä»¥é€šè¿‡ min å’Œ max å±æ€§æ¥è®¿é—®æ¯ä¸ªæ•´æ•°ç±»å‹çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼š

```swift
let minValue = UInt8.min // æœ€å°å€¼æ˜¯ 0, å€¼çš„ç±»å‹æ˜¯ UInt8
let maxValue = UInt8.max // æœ€å¤§å€¼æ˜¯ 255, å€¼å¾—ç±»å‹æ˜¯ UInt8
```

è¿™äº›å±æ€§çš„å€¼éƒ½æ˜¯è‡ªé€‚åº”å¤§å°çš„æ•°å­—ç±»å‹ï¼ˆæ¯”å¦‚è¯´ä¸Šè¾¹æ —å­é‡Œçš„ UInt8 ï¼‰å¹¶ä¸”å› æ­¤å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä¸åœ¨å…¶ä»–ç›¸åŒç±»å‹å€¼åŒç”¨ã€‚

#### 4.2 Int

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦åœ¨ä½ çš„ä»£ç ä¸­ä¸ºæ•´æ•°è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„é•¿åº¦ã€‚Swift æä¾›äº†ä¸€ä¸ªé¢å¤–çš„æ•´æ•°ç±»å‹ï¼š Int ï¼Œå®ƒæ‹¥æœ‰ä¸å½“å‰å¹³å°çš„åŸç”Ÿå­—ç›¸åŒçš„é•¿åº¦ã€‚

* åœ¨32ä½å¹³å°ä¸Šï¼Œ Int çš„é•¿åº¦å’Œ Int32 ç›¸åŒã€‚
* åœ¨64ä½å¹³å°ä¸Šï¼Œ Int çš„é•¿åº¦å’Œ Int64 ç›¸åŒã€‚

é™¤éä½ éœ€æ“ä½œç‰¹å®šé•¿åº¦çš„æ•´æ•°ï¼Œå¦åˆ™è¯·å°½é‡åœ¨ä»£ç ä¸­ä½¿ç”¨ Int ä½œä¸ºä½ çš„æ•´æ•°çš„å€¼ç±»å‹ã€‚è¿™æ ·èƒ½æé«˜ä»£ç çš„ç»Ÿä¸€æ€§å’Œå…¼å®¹æ€§ï¼Œå³ä½¿åœ¨ 32 ä½çš„å¹³å°ä¸Šï¼Œ Int ä¹Ÿå¯ä»¥å­˜ -2,147,483,648 åˆ° 2,147,483,647 ä¹‹é—´çš„ä»»æ„å€¼ï¼Œå¯¹äºå¤§å¤šæ•°æ•´æ•°åŒºé—´æ¥è¯´å®Œå…¨å¤Ÿç”¨äº†ã€‚

#### 4.3 UInt

Swift ä¹Ÿæä¾›äº†ä¸€ç§æ— ç¬¦å·çš„æ•´æ•°ç±»å‹ï¼Œ UInt ï¼Œå®ƒå’Œå½“å‰å¹³å°çš„åŸç”Ÿå­—é•¿åº¦ç›¸åŒã€‚

* åœ¨32ä½å¹³å°ä¸Šï¼Œ UInt é•¿åº¦å’Œ UInt32 é•¿åº¦ç›¸åŒã€‚
* åœ¨64ä½å¹³å°ä¸Šï¼Œ UInt é•¿åº¦å’Œ UInt64 é•¿åº¦ç›¸åŒã€‚

> åªåœ¨çš„ç¡®éœ€è¦å­˜å‚¨ä¸€ä¸ªå’Œå½“å‰å¹³å°åŸç”Ÿå­—é•¿åº¦ç›¸åŒçš„æ— ç¬¦å·æ•´æ•°çš„æ—¶å€™æ‰ä½¿ç”¨ UInt ã€‚å…¶ä»–æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ Int ï¼Œå³ä½¿å·²ç»çŸ¥é“å­˜å‚¨çš„å€¼éƒ½æ˜¯éè´Ÿçš„ã€‚å¦‚åŒç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­ä¸­æè¿°çš„é‚£æ ·ï¼Œç»Ÿä¸€ä½¿ç”¨ Int  ä¼šæé«˜ä»£ç çš„å…¼å®¹æ€§ï¼ŒåŒæ—¶å¯ä»¥é¿å…ä¸åŒæ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢é—®é¢˜ï¼Œä¹Ÿç¬¦åˆæ•´æ•°çš„ç±»å‹æ¨æ–­ã€‚

### 5 æµ®ç‚¹æ•°

æµ®ç‚¹æ•°æ˜¯æœ‰å°æ•°çš„æ•°å­—ï¼Œæ¯”å¦‚ 3.14159 , 0.1 , å’Œ -273.15 ã€‚
æµ®ç‚¹ç±»å‹ç›¸æ¯”æ•´æ•°ç±»å‹æ¥è¯´èƒ½è¡¨ç¤ºæ›´å¤§èŒƒå›´çš„å€¼ï¼Œå¯ä»¥å­˜å‚¨æ¯” Int ç±»å‹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°å­—ã€‚Swift æä¾›äº†ä¸¤ç§æœ‰ç¬¦å·çš„æµ®ç‚¹æ•°ç±»å‹ã€‚

* Doubleä»£è¡¨ 64 ä½çš„æµ®ç‚¹æ•°ã€‚
* Float ä»£è¡¨ 32 ä½çš„æµ®ç‚¹æ•°ã€‚

> Double æœ‰è‡³å°‘ 15 ä½æ•°å­—çš„ç²¾åº¦ï¼Œè€Œ Float çš„ç²¾åº¦åªæœ‰ 6 ä½ã€‚å…·ä½“ä½¿ç”¨å“ªç§æµ®ç‚¹ç±»å‹å–å†³äºä½ ä»£ç éœ€è¦å¤„ç†çš„å€¼èŒƒå›´ã€‚åœ¨ä¸¤ç§ç±»å‹éƒ½å¯ä»¥çš„æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ Double ç±»å‹ã€‚

### 6 ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­

Swift æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ã€‚ç±»å‹å®‰å…¨çš„è¯­è¨€å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çŸ¥é“ä»£ç å¯ä»¥å¤„ç†çš„å€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä¸€éƒ¨åˆ†ä»£ç æœŸæœ›è·å¾— String ï¼Œä½ å°±ä¸èƒ½é”™è¯¯çš„ä¼ ç»™å®ƒä¸€ä¸ª Int ã€‚

å› ä¸º Swift æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œä»–åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä»»ä½•ä¸åŒ¹é…çš„ç±»å‹éƒ½ä¼šè¢«æ ‡è®°ä¸ºé”™è¯¯ã€‚è¿™ä¼šå¸®åŠ©ä½ åœ¨å¼€å‘é˜¶æ®µæ›´æ—©çš„å‘ç°å¹¶ä¿®å¤é”™è¯¯ã€‚

å½“ä½ æ“ä½œä¸åŒç±»å‹çš„å€¼æ—¶ï¼Œç±»å‹æ£€æŸ¥èƒ½å¸®åŠ©ä½ é¿å…é”™è¯¯ã€‚å½“ç„¶ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ å¾—ä¸ºæ¯ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡å£°æ˜ä¸€ä¸ªç‰¹å®šçš„ç±»å‹ã€‚å¦‚æœä½ æ²¡æœ‰ä¸ºæ‰€éœ€è¦çš„å€¼è¿›è¡Œç±»å‹å£°æ˜ï¼ŒSwift ä¼šä½¿ç”¨ç±»å‹æ¨æ–­çš„åŠŸèƒ½æ¨æ–­å‡ºåˆé€‚çš„ç±»å‹ã€‚é€šè¿‡æ£€æŸ¥ä½ ç»™å˜é‡èµ‹çš„å€¼ï¼Œç±»å‹æ¨æ–­èƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µè‡ªåŠ¨çš„æ¨æ–­å‡ºå€¼çš„ç±»å‹ã€‚

å› ä¸ºæœ‰äº†ç±»å‹æ¨æ–­ï¼ŒSwift å’Œ C ä»¥åŠ Objective-C ç›¸æ¯”ï¼Œåªéœ€è¦å°‘é‡çš„ç±»å‹å£°æ˜ã€‚å…¶å®å¸¸é‡å’Œå˜é‡ä»ç„¶éœ€è¦æ˜ç¡®çš„ç±»å‹ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çš„å£°æ˜å·¥ä½œ Swift ä¼šå¸®ä½ åšã€‚

åœ¨ä½ ä¸ºä¸€ä¸ªå˜é‡æˆ–å¸¸é‡è®¾å®šä¸€ä¸ªåˆå§‹å€¼çš„æ—¶å€™ï¼Œç±»å‹æ¨æ–­å°±æ˜¾å¾—æ›´åŠ æœ‰ç”¨ã€‚å®ƒé€šå¸¸åœ¨ä½ å£°æ˜ä¸€ä¸ªå˜é‡æˆ–å¸¸é‡åŒæ—¶è®¾ç½®ä¸€ä¸ªåˆå§‹çš„å­—é¢é‡ï¼ˆæ–‡æœ¬ï¼‰æ—¶å°±å·²ç»å®Œæˆã€‚ï¼ˆå­—é¢é‡å°±æ˜¯ä¼šç›´æ¥å‡ºç°åœ¨ä½ ä»£ç ä¸­çš„å€¼ï¼Œæ¯”å¦‚ä¸‹è¾¹ä»£ç ä¸­çš„ 42 å’Œ 3.14159 ã€‚ï¼‰

ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœä½ ç»™ä¸€ä¸ªæ–°çš„å¸¸é‡è®¾å®šä¸€ä¸ª 42 çš„å­—é¢é‡ï¼Œè€Œä¸”æ²¡æœ‰è¯´å®ƒçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼ŒSwift ä¼šæ¨æ–­è¿™ä¸ªå¸¸é‡çš„ç±»å‹æ˜¯ Int ï¼Œå› ä¸ºä½ ç»™è¿™ä¸ªå¸¸é‡åˆå§‹åŒ–ä¸ºä¸€ä¸ªçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªæ•´æ•°çš„æ•°å­—ã€‚

```swift
let meaningOfLife = 42
// meaningOfLife is inferred to be of type Int
```

åŒæ ·ï¼Œå¦‚æœä½ æ²¡æœ‰ä¸ºä¸€ä¸ªæµ®ç‚¹å€¼çš„å­—é¢é‡è®¾å®šç±»å‹ï¼ŒSwift ä¼šæ¨æ–­ä½ æƒ³åˆ›å»ºä¸€ä¸ª Double ã€‚

```swift
let pi = 3.14159
// pi is inferred to be of type Double
```

Swift åœ¨æ¨æ–­æµ®ç‚¹å€¼çš„æ—¶å€™å§‹ç»ˆä¼šé€‰æ‹© Double ï¼ˆè€Œä¸æ˜¯ Float ï¼‰ã€‚

å¦‚æœä½ åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­å°†æ•´æ•°å’Œæµ®ç‚¹æ•°ç»“åˆèµ·æ¥ï¼Œ Double ä¼šä»å†…å®¹ä¸­è¢«æ¨æ–­å‡ºæ¥ã€‚

```swift
let anotherPi = 3 + 0.14159
// anotherPi is also inferred to be of type Double
```

è¿™å­—é¢é‡ 3 æ²¡æœ‰æ˜¾å¼çš„å£°æ˜å®ƒçš„ç±»å‹ï¼Œä½†å› ä¸ºåè¾¹æœ‰ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„å­—é¢é‡ï¼Œæ‰€ä»¥è¿™ä¸ªç±»å‹å°±è¢«æ¨æ–­ä¸º Double  ã€‚

### 7 æ•°å€¼å‹å­—é¢é‡
### 8 æ•°å€¼ç±»å‹è½¬æ¢
#### 8.1 æ•´æ•°è½¬æ¢
#### 8.2 æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢
### 9 ç±»å‹åˆ«å
### 10 å¸ƒå°”å€¼
### 11 å…ƒç»„
### 12 å¯é€‰é¡¹
#### 12.1 nil
#### 12.2 If è¯­å¥ä»¥åŠå¼ºåˆ¶å±•å¼€
#### 12.3 å¯é€‰é¡¹ç»‘å®š
#### 12.4 éšå¼å±•å¼€å¯é€‰é¡¹
### 13 é”™è¯¯å¤„ç†
### 14 æ–­è¨€å’Œå…ˆå†³æ¡ä»¶
#### 14.1 ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•
#### 14.2 å¼ºåˆ¶å…ˆå†³æ¡ä»¶

## åŸºæœ¬è¿ç®—ç¬¦
## å­—ç¬¦å’Œå­—ç¬¦ä¸²
## é›†åˆç±»å‹
## æ§åˆ¶æµ
## å‡½æ•°
## é—­åŒ…
## æšä¸¾

> é‡ç‚¹ï¼šå…³è”å€¼  åŸå§‹å€¼

### 1. ç®€ä»‹

æšä¸¾ä¸ºä¸€ç»„ç›¸å…³å€¼å®šä¹‰äº†ä¸€ä¸ªé€šç”¨ç±»å‹ï¼Œä»è€Œå¯ä»¥è®©ä½ åœ¨ä»£ç ä¸­å®‰å…¨åœ°æ“ä½œè¿™äº›å€¼ã€‚

å¦‚æœä½ ç†Ÿæ‚‰ C ï¼Œé‚£ä¹ˆä½ å¯èƒ½çŸ¥é“ C ä¸­çš„æšä¸¾ä¼šç»™ä¸€ç»„æ•´æ•°å€¼åˆ†é…ç›¸å…³çš„åç§°ã€‚Swift ä¸­çš„æšä¸¾åˆ™æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”ä¸éœ€ç»™æšä¸¾ä¸­çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½æä¾›å€¼ã€‚å¦‚æœä¸€ä¸ªå€¼ï¼ˆæ‰€è°“â€œåŸå§‹â€å€¼ï¼‰è¦è¢«æä¾›ç»™æ¯ä¸€ä¸ªæšä¸¾æˆå‘˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å­—ç¬¦ã€ä»»æ„çš„æ•´æ•°å€¼ï¼Œæˆ–è€…æ˜¯æµ®ç‚¹ç±»å‹ã€‚

è€Œä¸”ï¼Œæšä¸¾æˆå‘˜å¯ä»¥æŒ‡å®šä»»æ„ç±»å‹çš„å€¼æ¥ä¸ä¸åŒçš„æˆå‘˜å€¼å…³è”å‚¨å­˜ï¼Œè¿™æ›´åƒæ˜¯å…¶ä»–è¯­è¨€ä¸­çš„ union æˆ–variant çš„æ•ˆæœã€‚ä½ å¯ä»¥å®šä¹‰ä¸€ç»„ç›¸å…³æˆå‘˜çš„åˆé›†ä½œä¸ºæšä¸¾çš„ä¸€éƒ¨åˆ†ï¼Œæ¯ä¸€ä¸ªæˆå‘˜éƒ½å¯ä»¥æœ‰ä¸åŒç±»å‹çš„å€¼çš„åˆé›†ä¸å…¶å…³è”ã€‚

Swift ä¸­çš„æšä¸¾æ˜¯å…·æœ‰è‡ªå·±æƒé™çš„ä¸€ç±»ç±»å‹ã€‚å®ƒä»¬ä½¿ç”¨äº†è®¸å¤šä¸€èˆ¬åªè¢«ç±»æ‰€æ”¯æŒçš„ç‰¹æ€§ï¼Œä¾‹å¦‚è®¡ç®—å±æ€§ç”¨æ¥æä¾›å…³äºæšä¸¾å½“å‰å€¼çš„é¢å¤–ä¿¡æ¯ï¼Œå¹¶ä¸”å®ä¾‹æ–¹æ³•ç”¨æ¥æä¾›ä¸æšä¸¾è¡¨ç¤ºçš„å€¼ç›¸å…³çš„åŠŸèƒ½ã€‚æšä¸¾åŒæ ·ä¹Ÿèƒ½å¤Ÿå®šä¹‰åˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–æˆå‘˜å€¼ï¼›è€Œä¸”èƒ½å¤Ÿéµå¾ªåè®®æ¥æä¾›æ ‡å‡†åŠŸèƒ½ã€‚

### 2. è¯­æ³•

ä½ å¯ä»¥ç”¨ `enum` å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œç„¶åå°†å…¶æ‰€æœ‰çš„å®šä¹‰å†…å®¹æ”¾åœ¨ä¸€ä¸ªå¤§æ‹¬å·`{}`ä¸­ï¼š

```swift
enum SomeEnumeration {
}
```

è¿™æ˜¯ä¸€ä¸ªæŒ‡å—é’ˆçš„å››ä¸ªä¸»è¦æ–¹å‘çš„ä¾‹å­ï¼š

```swift
enum CompassPoint {
	case north
	case south
	case eath
	case west
}
```

åœ¨ä¸€ä¸ªæšä¸¾ä¸­å®šä¹‰çš„å€¼ï¼ˆæ¯”å¦‚ï¼š northï¼Œ southï¼Œ eastå’Œ westï¼‰å°±æ˜¯æšä¸¾çš„æˆå‘˜å€¼ï¼ˆæˆ–æˆå‘˜ï¼‰, `case`å…³é”®å­—åˆ™æ˜ç¡®äº†è¦å®šä¹‰æˆå‘˜å€¼ã€‚

> ä¸åƒ C å’Œ Objective-C é‚£æ ·ï¼ŒSwift çš„æšä¸¾æˆå‘˜åœ¨è¢«åˆ›å»ºæ—¶ä¸ä¼šåˆ†é…ä¸€ä¸ªé»˜è®¤çš„æ•´æ•°å€¼ã€‚
> 
> åœ¨ä¸Šæ–‡çš„ CompassPointä¾‹å­ä¸­ï¼Œ northï¼Œ southï¼Œ eastå’Œ westå¹¶ä¸ä»£è¡¨ 0ï¼Œ 1ï¼Œ 2å’Œ 3ã€‚
> 
> è€Œç›¸åï¼Œä¸åŒçš„æšä¸¾æˆå‘˜åœ¨å®ƒä»¬è‡ªå·±çš„æƒé™ä¸­éƒ½æ˜¯å®Œå…¨åˆæ ¼çš„å€¼ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªåœ¨ CompassPointä¸­è¢«æ˜¾å¼å®šä¹‰çš„ç±»å‹ã€‚

å¤šä¸ªæˆå‘˜å€¼å¯ä»¥å‡ºç°åœ¨åŒä¸€è¡Œä¸­ï¼Œè¦ç”¨é€—å·éš”å¼€ï¼š

```swift
enum Planet {
    case mercury, venus, earth, mars, jupiter, saturn, uranus, neptune
}
```

æ¯ä¸ªæšä¸¾éƒ½å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹ã€‚æ­£å¦‚ Swift ä¸­å…¶å®ƒçš„ç±»å‹é‚£æ ·ï¼Œå®ƒä»¬çš„åç§°ï¼ˆä¾‹å¦‚ï¼š CompassPointå’Œ Planetï¼‰éœ€è¦é¦–å­—æ¯å¤§å†™ã€‚ç»™æšä¸¾ç±»å‹èµ·ä¸€ä¸ªå•æ•°çš„è€Œä¸æ˜¯å¤æ•°çš„åå­—ï¼Œä»è€Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿé¡¾åæ€ä¹‰ï¼š

```swift
var directionToHead = CompassPoint.west
directionToHead = .east
```

å½“ä¸ CompassPointä¸­å¯ç”¨çš„æŸä¸€å€¼ä¸€åŒåˆå§‹åŒ–æ—¶ directionToHeadçš„ç±»å‹ä¼šè¢«æ¨æ–­å‡ºæ¥ã€‚ä¸€æ—¦ directionToHeadä»¥ CompassPointç±»å‹è¢«å£°æ˜ï¼Œä½ å°±å¯ä»¥ç”¨ä¸€ä¸ªç‚¹è¯­æ³•æŠŠå®ƒè®¾å®šæˆä¸åŒçš„ CompassPointå€¼ï¼š

**directionToHeadçš„ç±»å‹æ˜¯å·²çŸ¥çš„ï¼Œæ‰€ä»¥å½“è®¾å®šå®ƒçš„å€¼æ—¶ä½ å¯ä»¥ä¸ç”¨å†™ç±»å‹ã€‚è¿™æ ·åšå¯ä»¥ä½¿å¾—ä½ åœ¨æ“ä½œç¡®å®šç±»å‹çš„æšä¸¾æ—¶è®©ä»£ç éå¸¸æ˜“è¯»ã€‚**

### 3.ä½¿ç”¨ Switch è¯­å¥æ¥åŒ¹é…æšä¸¾å€¼

ä½ å¯ä»¥ç”¨ `switch` è¯­å¥æ¥åŒ¹é…æ¯ä¸€ä¸ªå•ç‹¬çš„æšä¸¾å€¼ï¼š

```swift
directionToHead = .south
switch directionToHead {
case .north:
    print("Lots of planets have a north")
case .south:
    print("Watch out for penguins")
case .east:
    print("Where the sun rises")
case .west:
    print("Where the skies are blue")
}
```

å½“åˆ¤æ–­ä¸€ä¸ªæšä¸¾æˆå‘˜æ—¶ï¼Œ switchè¯­å¥**å¿…é¡»**æ˜¯å…¨è¦†ç›–çš„ã€‚å¦‚æœ .westçš„ caseè¢«çœç•¥äº†ï¼Œé‚£ä¹ˆä»£ç å°†ä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸ºè¿™æ—¶è¡¨æ˜å®ƒå¹¶æ²¡æœ‰è¦†ç›– CompassPointçš„æ‰€æœ‰æˆå‘˜ã€‚è¦æ±‚è¦†ç›–æ‰€æœ‰æšä¸¾æˆå‘˜æ˜¯å› ä¸ºè¿™æ ·å¯ä»¥ä¿è¯æšä¸¾æˆå‘˜ä¸ä¼šæ„å¤–çš„è¢«æ¼æ‰ã€‚

å¦‚æœä¸èƒ½ä¸ºæ‰€æœ‰æšä¸¾æˆå‘˜éƒ½æä¾›ä¸€ä¸ª caseï¼Œé‚£ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª defaultæƒ…å†µæ¥åŒ…å«é‚£äº›ä¸èƒ½è¢«æ˜ç¡®å†™å‡ºçš„æˆå‘˜ï¼š

```swift
let somePlanet = Planet.earth
switch somePlanet {
case .earth:
    print("Mostly harmless")
default:
    print("Not a safe place for humans")
}
```

### 4. å…³è”å€¼

ä¹‹å‰å‡ èŠ‚ä¸­çš„æ —å­å±•ç¤ºäº†æšä¸¾æˆå‘˜æ˜¯æ€æ ·åœ¨ä»–ä»¬å„è‡ªçš„æƒé™ä¸­è¢«å®šä¹‰ï¼ˆå’Œè¢«åˆ†ç±»ï¼‰çš„ã€‚ä½ å¯ä»¥ç»™ Planet.earthè®¾å®šå¸¸é‡æˆ–å˜é‡ï¼Œç„¶åå†ä½¿ç”¨è¿™ä¸ªå€¼ã€‚æ€»ä¹‹ï¼Œæœ‰æ—¶å°†å…¶å®ƒç±»å‹çš„å…³è”å€¼ä¸è¿™äº›æˆå‘˜å€¼ä¸€èµ·å­˜å‚¨æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™æ ·ä½ å°±å¯ä»¥å°†é¢å¤–çš„è‡ªå®šä¹‰ä¿¡æ¯å’Œæˆå‘˜å€¼ä¸€èµ·å‚¨å­˜ï¼Œå¹¶ä¸”å…è®¸ä½ åœ¨ä»£ç ä¸­æ¯æ¬¡è°ƒç”¨è¿™ä¸ªæˆå‘˜æ—¶éƒ½èƒ½ä½¿ç”¨å®ƒã€‚

ä½ å¯ä»¥å®šä¹‰ Swift æšä¸¾æ¥å­˜å‚¨ä»»æ„ç»™å®šç±»å‹çš„å…³è”å€¼ï¼Œå¦‚æœéœ€è¦çš„è¯ä¸åŒæšä¸¾æˆå‘˜å…³è”å€¼çš„ç±»å‹å¯ä»¥ä¸åŒã€‚æšä¸¾ä¸å…¶ä»–è¯­è¨€ä¸­çš„ discriminated unions, tagged unions, æˆ–è€… variants ç±»ä¼¼ã€‚

ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾åº“å­˜è·Ÿè¸ªç³»ç»Ÿéœ€è¦æŒ‰ä¸¤ä¸ªä¸åŒç±»å‹çš„æ¡å½¢ç è·Ÿè¸ªäº§å“ï¼Œä¸€äº›äº§å“è´´çš„æ˜¯ç”¨æ•°å­— 0~9 çš„ UPC-A æ ¼å¼ä¸€ç»´æ¡å½¢ç ã€‚æ¯ä¸€ä¸ªæ¡ç æ•°å­—éƒ½å«æœ‰ä¸€ä¸ªâ€œæ•°å­—ç³»ç»Ÿâ€ä½ï¼Œä¹‹åæ˜¯äº”ä¸ªâ€œåˆ¶é€ å•†ä»£ç â€æ•°å­—å’Œäº”ä¸ªâ€œäº§å“ä»£ç â€æ•°å­—ã€‚è€Œæœ€ååˆ™æ˜¯ä¸€ä¸ªâ€œæ£€æµ‹â€ä½æ¥éªŒè¯ä»£ç å·²ç»è¢«æ­£ç¡®æ‰«æï¼š
![](https://wtj900.github.io/img/swift-barcode_UPC_2x.png)

å…¶å®ƒçš„äº§å“åˆ™è´´ç€äºŒç»´ç ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»»ä½• ISO 8859-1 å­—ç¬¦å¹¶ä¸”ç¼–ç æœ€é•¿æœ‰ 2953 ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼š
![](https://wtj900.github.io/img/swift-barcode_QR_2x.png)

è¿™æ ·å¯ä»¥è®©åº“å­˜è·Ÿè¸ªç³»ç»Ÿå¾ˆæ–¹ä¾¿çš„ä»¥ä¸€ä¸ªç”± 4 ä¸ªæ•´æ•°ç»„æˆçš„å…ƒç»„æ¥å‚¨å­˜ UPC-A æ¡å½¢ç ï¼Œç„¶è€ŒäºŒç»´ç åˆ™å¯ä»¥è¢«å­˜å‚¨ä¸ºä¸€ä¸ªä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ä¸­ã€‚

åœ¨ Swift ä¸­ï¼Œä¸ºä¸åŒç±»å‹äº§å“æ¡ç å®šä¹‰æšä¸¾å¤§æ¦‚æ˜¯è¿™ç§å§¿åŠ¿ï¼š

```swift 
enum Barcode {
    case upc(Int, Int, Int, Int)
    case qrCode(String)
}
```

è¿™å¯ä»¥è¯»ä½œï¼š

â€œå®šä¹‰ä¸€ä¸ªå«åš Barcodeçš„æšä¸¾ç±»å‹ï¼Œå®ƒè¦ä¹ˆç”¨ (Int, Int, Int, Int)ç±»å‹çš„å…³è”å€¼è·å– upc å€¼ï¼Œè¦ä¹ˆç”¨ String ç±»å‹çš„å…³è”å€¼è·å–ä¸€ä¸ª qrCodeçš„å€¼ã€‚â€

è¿™ä¸ªå®šä¹‰å¹¶ä¸æä¾›ä»»ä½•å®é™…çš„ Intæˆ–è€… Stringçš„å€¼â€”â€”å®ƒåªå®šä¹‰å½“ Barcodeå¸¸é‡å’Œå˜é‡ä¸ Barcode. upcæˆ– Barcode. qrCodeç›¸åŒæ—¶å¯ä»¥å­˜å‚¨çš„å…³è”å€¼çš„ç±»å‹ã€‚

ç„¶åï¼Œæ–°çš„æ¡ç å°±å¯ä»¥ç”¨ä»»æ„ä¸€ä¸ªç±»å‹æ¥åˆ›å»ºäº†ï¼š

```swift
var productBarcode = Barcode.upc(8, 85909, 51226, 3)
```

è¿™ä¸ªæ —å­åˆ›å»ºäº†ä¸€ä¸ªå«åš productBarcodeçš„æ–°å˜é‡è€Œä¸”ç»™å®ƒèµ‹å€¼äº†ä¸€ä¸ª Barcode.upcçš„å€¼å…³è”äº†å€¼ä¸º (8, 85909, 51226, 3)çš„å…ƒç»„å€¼ã€‚

åŒæ ·çš„äº§å“å¯ä»¥è¢«åˆ†é…ä¸€ä¸ªä¸åŒç±»å‹çš„æ¡ç ï¼š

```swift
productBarcode = .qrCode("ABCDEFGHIJKLMNOP")
```

è¿™æ—¶ï¼Œæœ€åˆçš„ Barcode.upcå’Œå®ƒçš„æ•´æ•°å€¼å°†è¢«æ–°çš„ Barcode.qrCodeå’Œå®ƒçš„å­—ç¬¦ä¸²å€¼ä»£æ›¿ã€‚ Barcodeç±»å‹çš„å¸¸é‡å’Œå˜é‡å¯ä»¥å­˜å‚¨ä¸€ä¸ª .upcæˆ–ä¸€ä¸ª .qrCodeï¼ˆå’Œå®ƒä»¬çš„ç›¸å…³å€¼ä¸€èµ·å­˜å‚¨ï¼‰ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œä½†æ˜¯å®ƒä»¬åªå¯ä»¥åœ¨ç»™å®šçš„æ—¶é—´å†…å­˜å‚¨å®ƒä»¬å®ƒä»¬å…¶ä¸­ä¹‹ä¸€ã€‚

å’Œä»¥å¾€ä¸€æ ·ï¼Œä¸åŒçš„æ¡ç ç±»å‹å¯ä»¥ç”¨ switch è¯­å¥æ¥æ£€æŸ¥ã€‚è¿™ä¸€æ¬¡ï¼Œæ€»ä¹‹ï¼Œç›¸å…³å€¼å¯ä»¥è¢«æå–ä¸º switch è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚ä½ æå–çš„æ¯ä¸€ä¸ªç›¸å…³å€¼éƒ½å¯ä»¥ä½œä¸ºå¸¸é‡ï¼ˆç”¨ letå‰ç¼€) æˆ–è€…å˜é‡ï¼ˆç”¨ varå‰ç¼€ï¼‰åœ¨ switchçš„ caseä¸­ä½¿ç”¨ï¼š

```swift
switch productBarcode {
case .upc(let numberSystem, let manufacturer, let product, let check):
    print("UPC: \(numberSystem), \(manufacturer), \(product), \(check).")
case .qrCode(let productCode):
    print("QR code: \(productCode).")
}
```

å¦‚æœå¯¹äºä¸€ä¸ªæšä¸¾æˆå‘˜çš„æ‰€æœ‰çš„ç›¸å…³å€¼éƒ½è¢«æå–ä¸ºå¸¸é‡ï¼Œæˆ–å¦‚æœéƒ½è¢«æå–ä¸ºå˜é‡ï¼Œä¸ºäº†ç®€æ´ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªå•ç‹¬çš„ varæˆ– letåœ¨æˆå‘˜åç§°å‰æ ‡æ³¨ï¼š

```swift
switch productBarcode {
case let .upc(numberSystem, manufacturer, product, check):
    print("UPC : \(numberSystem), \(manufacturer), \(product), \(check).")
case let .qrCode(productCode):
    print("QR code: \(productCode).")
}
```

### 5. åŸå§‹å€¼

å…³è”å€¼ä¸­æ¡å½¢ç çš„æ —å­å±•ç¤ºäº†æšä¸¾æˆå‘˜æ˜¯å¦‚ä½•å£°æ˜å®ƒä»¬å­˜å‚¨`ä¸åŒç±»å‹`çš„ç›¸å…³å€¼çš„ã€‚ä½œä¸ºç›¸å…³å€¼çš„å¦ä¸€ç§é€‰æ‹©ï¼Œæšä¸¾æˆå‘˜å¯ä»¥ç”¨`ç›¸åŒç±»å‹`çš„é»˜è®¤å€¼é¢„å…ˆå¡«å……ï¼ˆç§°ä¸ºåŸå§‹å€¼ï¼‰ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªå’Œå·²å‘½åçš„æšä¸¾æˆå‘˜ä¸€èµ·å­˜å‚¨çš„åŸå§‹ ASCII ç çš„ä¾‹å­ï¼š

```swift
enum ASCIIControlCharacter: Character {
    case tab = "\t"
    case lineFeed = "\n"
    case carriageReturn = "\r"
}
```

è¿™é‡Œï¼Œä¸€ä¸ªå«åš ASCIIControlCharacterçš„æšä¸¾åŸå§‹å€¼è¢«å®šä¹‰ä¸ºç±»å‹ Characterï¼Œå¹¶ä¸”è¢«æ”¾ç½®åœ¨äº†æ›´å¤šçš„ä¸€äº› ASCII æ§åˆ¶å­—ç¬¦ä¸­ï¼Œ Characterå€¼çš„æè¿°è§å­—ç¬¦ä¸²å’Œå­—ç¬¦ã€‚

> åŸå§‹å€¼ä¸å…³è”å€¼ä¸åŒã€‚åŸå§‹å€¼æ˜¯å½“ä½ ç¬¬ä¸€æ¬¡å®šä¹‰æšä¸¾çš„æ—¶å€™ï¼Œå®ƒä»¬ç”¨æ¥é¢„å…ˆå¡«å……çš„å€¼ï¼Œæ­£å¦‚ä¸Šé¢çš„ä¸‰ä¸ª ASCII ç ã€‚ç‰¹å®šæšä¸¾æˆå‘˜çš„åŸå§‹å€¼æ˜¯å§‹ç»ˆç›¸åŒçš„ã€‚å…³è”å€¼åœ¨ä½ åŸºäºæšä¸¾æˆå‘˜çš„å…¶ä¸­ä¹‹ä¸€åˆ›å»ºæ–°çš„å¸¸é‡æˆ–å˜é‡æ—¶è®¾å®šï¼Œå¹¶ä¸”åœ¨ä½ æ¯æ¬¡è¿™ä¹ˆåšçš„æ—¶å€™è¿™äº›å…³è”å€¼å¯ä»¥æ˜¯ä¸åŒçš„ã€‚


### 6. éšå¼æŒ‡å®šçš„åŸå§‹å€¼

å½“ä½ åœ¨æ“ä½œå­˜å‚¨æ•´æ•°æˆ–å­—ç¬¦ä¸²åŸå§‹å€¼æšä¸¾çš„æ—¶å€™ï¼Œä½ ä¸å¿…æ˜¾å¼åœ°ç»™æ¯ä¸€ä¸ªæˆå‘˜éƒ½åˆ†é…ä¸€ä¸ªåŸå§‹å€¼ã€‚å½“ä½ æ²¡æœ‰åˆ†é…æ—¶ï¼ŒSwift å°†ä¼šè‡ªåŠ¨ä¸ºä½ åˆ†é…å€¼ã€‚

å®é™…ä¸Šï¼Œå½“æ•´æ•°å€¼è¢«ç”¨äºä½œä¸ºåŸå§‹å€¼æ—¶ï¼Œæ¯æˆå‘˜çš„éšå¼å€¼éƒ½æ¯”å‰ä¸€ä¸ªå¤§ä¸€ã€‚å¦‚æœç¬¬ä¸€ä¸ªæˆå‘˜æ²¡æœ‰å€¼ï¼Œé‚£ä¹ˆå®ƒçš„å€¼æ˜¯ 0 ã€‚

ä¸‹é¢çš„æšä¸¾æ˜¯å…ˆå‰çš„ Planetæšä¸¾çš„ç®€åŒ–ï¼Œç”¨æ•´æ•°åŸå§‹å€¼æ¥ä»£è¡¨ä»å¤ªé˜³åˆ°æ¯ä¸€ä¸ªè¡Œæ˜Ÿçš„é¡ºåºï¼š

```swift
enum Planet: Int {
    case mercury = 1, venus, earth, mars, jupiter, saturn, uranus, neptune
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ Planet.mercuryæœ‰ä¸€ä¸ªæ˜ç¡®çš„åŸå§‹å€¼ 1 ï¼Œ Planet.venusçš„éšå¼åŸå§‹å€¼æ˜¯ 2ï¼Œä»¥æ­¤ç±»æ¨ã€‚

å½“å­—ç¬¦ä¸²è¢«ç”¨äºåŸå§‹å€¼ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªæˆå‘˜çš„éšå¼åŸå§‹å€¼åˆ™æ˜¯é‚£ä¸ªæˆå‘˜çš„åç§°ã€‚

ä¸‹é¢çš„æšä¸¾æ˜¯å…ˆå‰ CompassPointæšä¸¾çš„ç®€åŒ–ï¼Œæœ‰å­—ç¬¦ä¸²çš„åŸå§‹å€¼æ¥ä»£è¡¨æ¯ä¸€ä¸ªæ–¹ä½çš„åå­—ï¼š

```swift 
enum CompassPoint: String {
    case north, south, east, west
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ CompassPoint.southæœ‰ä¸€ä¸ªéšå¼åŸå§‹å€¼ "south" ï¼Œä»¥æ­¤ç±»æ¨ã€‚

ä½ å¯ä»¥ç”¨ rawValueå±æ€§æ¥è®¿é—®ä¸€ä¸ªæšä¸¾æˆå‘˜çš„åŸå§‹å€¼ï¼š

```swift
let earthsOrder = Planet.Earth.rawValue
// earthsOrder is 3
 
let sunsetDirection = CompassPoint.west.rawValue
// sunsetDirection is "west"
```

### 7. ä»åŸå§‹å€¼åˆå§‹åŒ–

å¦‚æœä½ ç”¨åŸå§‹å€¼ç±»å‹æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œé‚£ä¹ˆæšä¸¾å°±ä¼šè‡ªåŠ¨æ”¶åˆ°ä¸€ä¸ªå¯ä»¥æ¥å—åŸå§‹å€¼ç±»å‹çš„å€¼çš„åˆå§‹åŒ–å™¨ï¼ˆå«åš rawValueçš„å½¢å¼å‚æ•°ï¼‰ç„¶åè¿”å›ä¸€ä¸ªæšä¸¾æˆå‘˜æˆ–è€… nil ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªåˆå§‹åŒ–å™¨æ¥å°è¯•åˆ›å»ºä¸€ä¸ªæšä¸¾çš„æ–°å®ä¾‹ã€‚

è¿™ä¸ªä¾‹å­ä»å®ƒçš„åŸå§‹å€¼ 7æ¥è¾¨è®¤å‡º Uranus ï¼š

```swift
let possiblePlanet = Planet(rawValue: 7)
```

æ€»ä¹‹ï¼Œä¸æ˜¯æ‰€æœ‰å¯èƒ½çš„ Intå€¼éƒ½ä¼šå¯¹åº”ä¸€ä¸ªè¡Œæ˜Ÿã€‚å› æ­¤åŸå§‹å€¼çš„åˆå§‹åŒ–å™¨æ€»æ˜¯è¿”å›å¯é€‰çš„æšä¸¾æˆå‘˜ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ possiblePlanetçš„ç±»å‹æ˜¯ Planet? ï¼Œæˆ–è€…â€œå¯é€‰é¡¹ Planetâ€

### 8. é€’å½’æšä¸¾

æšä¸¾åœ¨å¯¹åºå·è€ƒè™‘å›ºå®šæ•°é‡å¯èƒ½æ€§çš„æ•°æ®å»ºæ¨¡æ—¶è¡¨ç°è‰¯å¥½ï¼Œæ¯”å¦‚ç”¨æ¥åšç®€å•æ•´æ•°è¿ç®—çš„è¿ç®—ç¬¦ã€‚è¿™äº›è¿ç®—ç¬¦å…è®¸ä½ ç»„åˆç®€å•çš„æ•´æ•°æ•°å­¦è¿ç®—è¡¨è¾¾å¼æ¯”å¦‚5åˆ°æ›´å¤æ‚çš„æ¯”å¦‚5+4.

æ•°å­¦è¡¨è¾¾å¼çš„ä¸€å¤§ç‰¹å¾å°±æ˜¯å®ƒä»¬å¯ä»¥å†…åµŒã€‚æ¯”å¦‚è¯´è¡¨è¾¾å¼(5 + 4) * 2 åœ¨ä¹˜æ³•å³æ‰‹ä¾§æœ‰ä¸€ä¸ªæ•°ä½†å…¶ä»–è¡¨è¾¾å¼åœ¨ä¹˜æ³•çš„å·¦æ‰‹ä¾§ã€‚å› ä¸ºæ•°æ®è¢«å†…åµŒäº†ï¼Œç”¨æ¥å‚¨å­˜æ•°æ®çš„æšä¸¾åŒæ ·éœ€è¦æ”¯æŒå†…åµŒâ€”â€”è¿™æ„å‘³ç€æšä¸¾éœ€è¦è¢«é€’å½’ã€‚

é€’å½’æšä¸¾æ˜¯æ‹¥æœ‰å¦ä¸€ä¸ªæšä¸¾ä½œä¸ºæšä¸¾æˆå‘˜å…³è”å€¼çš„æšä¸¾ã€‚å½“ç¼–è¯‘å™¨æ“ä½œé€’å½’æšä¸¾æ—¶å¿…é¡»æ’å…¥é—´æ¥å¯»å€å±‚ã€‚ä½ å¯ä»¥åœ¨å£°æ˜æšä¸¾æˆå‘˜ä¹‹å‰ä½¿ç”¨`indirect`å…³é”®å­—æ¥æ˜ç¡®å®ƒæ˜¯é€’å½’çš„ã€‚

ä¸¾ä¾‹æ¥è®²ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‚¨å­˜ç®€å•æ•°å­¦è¿ç®—è¡¨è¾¾å¼çš„æšä¸¾ï¼š

```swift
enum ArithmeticExpression {
    case number(Int)
    indirect case addition(ArithmeticExpression, ArithmeticExpression)
    indirect case multiplication(ArithmeticExpression, ArithmeticExpression)
}
```

ä½ åŒæ ·å¯ä»¥åœ¨æšä¸¾ä¹‹å‰å†™ `indirect` æ¥è®©æ•´ä¸ªæšä¸¾æˆå‘˜åœ¨éœ€è¦æ—¶å¯ä»¥é€’å½’ï¼š

```swift
indirect enum ArithmeticExpression {
    case number(Int)
    case addition(ArithmeticExpression, ArithmeticExpression)
    case multiplication(ArithmeticExpression, ArithmeticExpression)
}
```

è¿™ä¸ªæšä¸¾å¯ä»¥å‚¨å­˜ä¸‰ç§æ•°å­¦è¿ç®—è¡¨è¾¾å¼ï¼šå•ä¸€çš„æ•°å­—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼çš„åŠ æ³•ï¼Œä»¥åŠä¸¤ä¸ªè¡¨è¾¾å¼çš„ä¹˜æ³•ã€‚ addition å’Œ multiplication æˆå‘˜æ‹¥æœ‰åŒæ ·æ˜¯æ•°å­¦è¡¨è¾¾å¼çš„å…³è”å€¼â€”â€”è¿™äº›å…³è”å€¼è®©åµŒå¥—è¡¨è¾¾å¼æˆä¸ºå¯èƒ½ã€‚æ¯”å¦‚è¯´ï¼Œè¡¨è¾¾å¼ (5 + 4) * 2 ä¹˜å·å³ä¾§æœ‰ä¸€ä¸ªæ•°å­—å·¦ä¾§æœ‰å…¶ä»–è¡¨è¾¾å¼ã€‚ç”±äºæ•°æ®æ˜¯å†…åµŒçš„ï¼Œç”¨æ¥å‚¨å­˜æ•°æ®çš„æšä¸¾åŒæ ·éœ€è¦æ”¯æŒå†…åµŒâ€”â€”è¿™å°±æ˜¯è¯´æšä¸¾éœ€è¦é€’å½’ã€‚ä¸‹è¾¹çš„ä»£ç å±•ç¤ºäº†ä¸º (5 + 4) * 2 åˆ›å»ºçš„é€’å½’æšä¸¾ ArithmeticExpression ï¼š


```swift
let five = ArithmeticExpression.number(5)
let four = ArithmeticExpression.number(4)
let sum = ArithmeticExpression.addition(five, four)
let product = ArithmeticExpression.multiplication(sum, ArithmeticExpression.number(2))

```


é€’å½’å‡½æ•°æ˜¯ä¸€ç§æ“ä½œé€’å½’ç»“æ„æ•°æ®çš„ç®€å•æ–¹æ³•ã€‚æ¯”å¦‚è¯´ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåˆ¤æ–­æ•°å­¦è¡¨è¾¾å¼çš„å‡½æ•°ï¼š

```swift
func evaluate(_ expression: ArithmeticExpression) -> Int {
    switch expression {
    case let .number(value):
        return value
    case let .addition(left, right):
        return evaluate(left) + evaluate(right)
    case let .multiplication(left, right):
        return evaluate(left) * evaluate(right)
    }
}
 
print(evaluate(product))
// Prints "18"
```

è¿™ä¸ªå‡½æ•°é€šè¿‡ç›´æ¥è¿”å›å…³è”å€¼æ¥åˆ¤æ–­æ™®é€šæ•°å­—ã€‚å®ƒé€šè¿‡è¡¡é‡è¡¨è¾¾å¼å·¦æ‰‹ä¾§å’Œå³æ‰‹ä¾§åˆ¤æ–­æ˜¯åŠ æ³•è¿˜æ˜¯ä¹˜æ³•ï¼Œç„¶åå¯¹å®ƒä»¬åŠ æˆ–è€…ä¹˜ã€‚

æºç ï¼š

```swift
indirect enum ArithmeticExpression {
    case number(Int)
    case addNumber(ArithmeticExpression, ArithmeticExpression)
    case mutiNumber(ArithmeticExpression, ArithmeticExpression)
    
    static func evalute(value: ArithmeticExpression) -> Int {
        
        switch value {
        case let .number(num):
            return num
        case let .addNumber(left, right):
            return evalute(value: left) + evalute(value: right)
        case let .mutiNumber(left, right):
            return evalute(value: left) * evalute(value: right)
        }
        
    }
    
}

let four = ArithmeticExpression.number(4)
let five = ArithmeticExpression.number(5)
let addNum = ArithmeticExpression.addNumber(four, five)
let mutiNum = ArithmeticExpression.mutiNumber(addNum, ArithmeticExpression.number(2))

ArithmeticExpression.evalute(value: mutiNum)
```

### 9. ä½ç§»æšä¸¾

OCæšä¸¾ï¼š

* æ™®é€šæšä¸¾ 

```objc
typedef NS_ENUM(NSInteger, UIViewAnimationTransition) {
    UIViewAnimationTransitionNone,
    UIViewAnimationTransitionFlipFromLeft,
    UIViewAnimationTransitionFlipFromRight,
    UIViewAnimationTransitionCurlUp,
    UIViewAnimationTransitionCurlDown,
};
```

* ä½ç§»æšä¸¾

```objc
typedef NS_OPTIONS(NSUInteger, UIViewAutoresizing) {
    UIViewAutoresizingNone = 0,
    UIViewAutoresizingFlexibleLeftMargin = 1 << 0,
    UIViewAutoresizingFlexibleWidth = 1 << 1,
    UIViewAutoresizingFlexibleRightMargin= 1 << 2,
    UIViewAutoresizingFlexibleTopMargin= 1 << 3,
    UIViewAutoresizingFlexibleHeight= 1 << 4,
    UIViewAutoresizingFlexibleBottomMargin = 1 << 5
};
```

Swiftæšä¸¾ï¼š

å¯¹äºä½æ©ç ,Swift ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯:é€‰é¡¹é›†åˆ(option sets)ã€‚åœ¨ C å’Œ Objective-C ä¸­,é€šå¸¸çš„åšæ³•æ˜¯å°†ä¸€ä¸ªå¸ƒå°”å€¼é€‰é¡¹é›†åˆè¡¨ç¤ºä¸ºä¸€ç³»åˆ—å€¼ä¸º 2 çš„æ•´æ•°æ¬¡å¹‚çš„æšä¸¾æˆå‘˜ã€‚

Swift ä½¿ç”¨ç»“æ„ä½“(struct)æ¥éµä» OptionSet åè®®,ä»¥å¼•å…¥é€‰é¡¹é›†åˆ,è€Œéæšä¸¾(enum)ã€‚ä¸ºä»€ä¹ˆè¿™æ ·å¤„ç†å‘¢?å½“æšä¸¾æˆå‘˜äº’æ–¥çš„æ—¶å€™,æ¯”å¦‚è¯´,ä¸€æ¬¡åªæœ‰ä¸€ä¸ªé€‰é¡¹å¯ä»¥è¢«é€‰æ‹©çš„æƒ…å†µä¸‹,æšä¸¾æ˜¯éå¸¸å¥½çš„ã€‚ä½†æ˜¯å’Œ C ä¸åŒ,åœ¨ Swift ä¸­,ä½ æ— æ³•æŠŠå¤šä¸ªæšä¸¾æˆå‘˜ç»„åˆæˆä¸€ä¸ªå€¼,è€Œ C ä¸­çš„æšä¸¾å¯¹ç¼–è¯‘å™¨æ¥è¯´å°±æ˜¯æ•´å‹,å¯ä»¥æ¥å—ä»»æ„æ•´æ•°å€¼ã€‚ 

å’Œ C ä¸­ä¸€æ ·,Swift ä¸­çš„é€‰é¡¹é›†åˆç»“æ„ä½“ä½¿ç”¨äº†é«˜æ•ˆçš„ä½åŸŸæ¥è¡¨ç¤º,ä½†æ˜¯è¿™ä¸ªç»“æ„ä½“æœ¬èº«è¡¨ç°ä¸ºä¸€ä¸ªé›†åˆ,å®ƒçš„æˆå‘˜åˆ™ä¸ºè¢«é€‰æ‹©çš„é€‰é¡¹ã€‚è¿™å…è®¸ä½ ä½¿ç”¨æ ‡å‡†çš„é›†åˆè¿ç®—#Basic_operations)æ¥ç»´æŠ¤ä½åŸŸ,æ¯”å¦‚ä½¿ç”¨ contains æ¥æ£€éªŒé›†åˆä¸­æ˜¯å¦æœ‰æŸä¸ªæˆå‘˜,æˆ–è€…æ˜¯ç”¨ union æ¥ç»„åˆä¸¤ä¸ªä½åŸŸã€‚å¦å¤–,ç”±äº OptionSet ç»§æ‰¿äº ExpressibleByArrayLiteral,ä½ å¯ä»¥ä½¿ç”¨æ•°ç»„å­—é¢é‡æ¥ç”Ÿæˆä¸€ä¸ªé€‰é¡¹é›†åˆã€‚

å¦‚ä½•åˆ›å»ºä½ è‡ªå·±çš„é€‰é¡¹é›†åˆç±»å‹å‘¢?ä»…æœ‰çš„è¦æ±‚æ˜¯,ä¸€ä¸ªç±»å‹ä¸ºæ•´å‹çš„åŸå§‹å€¼(rawValue)å’Œä¸€ä¸ªåˆå§‹åŒ–æ„é€ å™¨ã€‚å¯¹äºç»“æ„ä½“æ¥è¯´,Swift é€šå¸¸éƒ½ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªé€ä¸€æˆå‘˜æ„é€ å™¨(memberwise initializer),æ‰€ä»¥ä½ å¹¶ä¸éœ€è¦è‡ªå·±å†™ä¸€ä¸ªã€‚rawValue æ˜¯ä½åŸŸåº•å±‚çš„å­˜å‚¨å•å…ƒã€‚æ¯ä¸ªé€‰é¡¹éƒ½åº”è¯¥æ˜¯é™æ€çš„å¸¸é‡,å¹¶ä½¿ç”¨é€‚å½“çš„å€¼åˆå§‹åŒ–äº†å…¶ä½åŸŸã€‚ 

```swift
struct EWSLearningRemindDateOption: OptionSet {
    
    let rawValue: Int
    
    static let None = EWSLearningRemindDateOption(rawValue: 0)
    static let Sunday = EWSLearningRemindDateOption(rawValue: 1 << 0)
    static let Monday = EWSLearningRemindDateOption(rawValue: 1 << 1)
    static let Tuesday = EWSLearningRemindDateOption(rawValue: 1 << 2)
    static let Wednesday = EWSLearningRemindDateOption(rawValue: 1 << 3)
    static let Thursday = EWSLearningRemindDateOption(rawValue: 1 << 4)
    static let Friday = EWSLearningRemindDateOption(rawValue: 1 << 5)
    static let Saturday = EWSLearningRemindDateOption(rawValue: 1 << 6)
    
}
```

> é€‰é¡¹é›†åˆå¹¶ä¸æ˜¯é›†åˆç±»å‹ 
> 
> éµä» OptionSet å¹¶ä¸æ„å‘³ç€éµä» Sequence å’Œ Collection åè®®,æ‰€ä»¥ä½ æ— æ³•ä½¿ç”¨ count æ¥ç¡®å®šé›†åˆä¸­æœ‰å‡ ä¸ªå…ƒç´ ,ä¹Ÿæ— æ³•ä½¿ç”¨ for å¾ªç¯æ¥éå†é€‰æ‹©çš„é€‰é¡¹ã€‚ä»æ ¹æœ¬ä¸Šè¯´,ä¸€ä¸ªé€‰é¡¹é›†åˆä»…ä»…æ˜¯ç®€å•çš„æ•´æ•°å€¼ã€‚

## ç±»å’Œç»“æ„ä½“
## å±æ€§

å±æ€§å¯ä»¥å°†å€¼ä¸ç‰¹å®šçš„ç±»ã€ç»“æ„ä½“æˆ–è€…æ˜¯æšä¸¾è”ç³»èµ·æ¥ã€‚å­˜å‚¨å±æ€§ä¼šå­˜å‚¨å¸¸é‡æˆ–å˜é‡ä½œä¸ºå®ä¾‹çš„ä¸€éƒ¨åˆ†ï¼Œåä¹‹è®¡ç®—å±æ€§ä¼šè®¡ç®—ï¼ˆè€Œä¸æ˜¯å­˜å‚¨ï¼‰å€¼ã€‚è®¡ç®—å±æ€§å¯ä»¥ç”±ç±»ã€ç»“æ„ä½“å’Œæšä¸¾å®šä¹‰ã€‚å­˜å‚¨å±æ€§åªèƒ½ç”±ç±»å’Œç»“æ„ä½“å®šä¹‰ã€‚

å­˜å‚¨å±æ€§å’Œè®¡ç®—å±æ€§é€šå¸¸å’Œç‰¹å®šç±»å‹çš„å®ä¾‹ç›¸å…³è”ï¼ˆ**å®ä¾‹å±æ€§**ï¼‰ã€‚å±æ€§ä¹Ÿå¯ä»¥ä¸ç±»å‹æœ¬èº«ç›¸å…³è”ï¼Œè¿™ç§å±æ€§å°±æ˜¯æ‰€è°“çš„**ç±»å‹å±æ€§**ã€‚

å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰å±æ€§è§‚å¯Ÿå™¨æ¥æ£€æŸ¥å±æ€§ä¸­å€¼çš„å˜åŒ–ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨è‡ªå®šä¹‰çš„è¡Œä¸ºæ¥å“åº”ã€‚å±æ€§è§‚å¯Ÿå™¨å¯ä»¥è¢«æ·»åŠ åˆ°ä½ è‡ªå·±å®šä¹‰çš„å­˜å‚¨å±æ€§ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°å­ç±»ä»ä»–çš„çˆ¶ç±»é‚£é‡Œæ‰€ç»§æ‰¿æ¥çš„å±æ€§ä¸­ã€‚

### 1. å­˜å‚¨å±æ€§

åœ¨å…¶æœ€ç®€å•çš„å½¢å¼ä¸‹ï¼Œå­˜å‚¨å±æ€§æ˜¯ä¸€ä¸ªä½œä¸ºç‰¹å®šç±»å’Œç»“æ„ä½“å®ä¾‹ä¸€éƒ¨åˆ†çš„å¸¸é‡æˆ–å˜é‡ã€‚å­˜å‚¨å±æ€§è¦ä¹ˆæ˜¯å˜é‡å­˜å‚¨å±æ€§ï¼ˆç”± `var`  å…³é”®å­—å¼•å…¥ï¼‰è¦ä¹ˆæ˜¯å¸¸é‡å­˜å‚¨å±æ€§ï¼ˆç”± `let`  å…³é”®å­—å¼•å…¥ï¼‰ã€‚

æ­£å¦‚[é»˜è®¤å±æ€§å€¼](#default_value)ä¸­æ‰€è¿°ï¼Œä½ å¯ä»¥ä¸ºå­˜å‚¨å±æ€§æä¾›ä¸€ä¸ªé»˜è®¤å€¼ä½œä¸ºå®ƒå®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è®¾ç½®å’Œä¿®æ”¹å­˜å‚¨å±æ€§çš„åˆå§‹å€¼ã€‚æ­£å¦‚åœ¨[åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§](#init_value)æ‰€è¿°ï¼Œè¿™ä¸€ç‚¹å¯¹äºå¸¸é‡å­˜å‚¨å±æ€§ä¹Ÿæˆç«‹ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º FixedLengthRange çš„ç»“æ„ä½“ï¼Œå®ƒæè¿°äº†ä¸€ä¸ªä¸€æ—¦è¢«åˆ›å»ºé•¿åº¦å°±ä¸èƒ½æ”¹å˜çš„æ•´å‹å€¼åŸŸï¼š

```swift
struct FixedLengthRange {
    var firstValue: Int
    let length: Int
}
var rangeOfThreeItems = FixedLengthRange(firstValue: 0, length: 3)
// the range represents integer values 0, 1, and 2
rangeOfThreeItems.firstValue = 6
// the range now represents integer values 6, 7, and 8
```

`FixedLengthRange` çš„å®ä¾‹æœ‰ä¸€ä¸ªåä¸º `firstValue` çš„å˜é‡å­˜å‚¨å±æ€§å’Œä¸€ä¸ªåä¸º `length` çš„å¸¸é‡å­˜å‚¨å±æ€§ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“æ–°çš„å€¼åŸŸåˆ›å»ºæ—¶ `length` å·²ç»è¢«åˆ›å»ºå¹¶ä¸”ä¸èƒ½å†ä¿®æ”¹ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¸¸é‡å±æ€§ã€‚

<p id = "const_struct_property"></p>
#### 1.1 å¸¸é‡ç»“æ„ä½“å®ä¾‹çš„å­˜å‚¨å±æ€§

å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“çš„å®ä¾‹å¹¶ä¸”æŠŠè¿™ä¸ªå®ä¾‹èµ‹ç»™å¸¸é‡ï¼Œä½ ä¸èƒ½ä¿®æ”¹è¿™ä¸ªå®ä¾‹çš„å±æ€§ï¼Œå³ä½¿æ˜¯å£°æ˜ä¸ºå˜é‡çš„å±æ€§ï¼š

```swift
let rangeOfFourItems = FixedLengthRange(firstValue: 0, length: 4)
// this range represents integer values 0, 1, 2, and 3
rangeOfFourItems.firstValue = 6
// * this will report an error, even though firstValue is a variable property
```

ç”±äº `rangeOfFourItems` è¢«å£°æ˜ä¸ºå¸¸é‡ï¼ˆç”¨ `let` å…³é”®å­—ï¼‰ï¼Œæˆ‘ä»¬ä¸èƒ½æ”¹å˜å…¶ `firstValue` å±æ€§ï¼Œå³ä½¿ `firstValue` æ˜¯ä¸€ä¸ªå˜é‡å±æ€§ã€‚

è¿™æ˜¯ç”±äºç»“æ„ä½“æ˜¯`å€¼ç±»å‹`ã€‚å½“ä¸€ä¸ªå€¼ç±»å‹çš„å®ä¾‹è¢«æ ‡è®°ä¸ºå¸¸é‡æ—¶ï¼Œè¯¥å®ä¾‹çš„å…¶ä»–å±æ€§ä¹Ÿå‡ä¸ºå¸¸é‡ã€‚

å¯¹äºç±»æ¥è¯´åˆ™ä¸åŒï¼Œå®ƒæ˜¯`å¼•ç”¨ç±»å‹`ã€‚å¦‚æœä½ ç»™ä¸€ä¸ªå¸¸é‡èµ‹å€¼å¼•ç”¨ç±»å‹å®ä¾‹ï¼Œä½ ä»ç„¶å¯ä»¥ä¿®æ”¹é‚£ä¸ªå®ä¾‹çš„å˜é‡å±æ€§ã€‚

#### 1.2 å»¶è¿Ÿå­˜å‚¨å±æ€§

å»¶è¿Ÿå­˜å‚¨å±æ€§çš„åˆå§‹å€¼åœ¨å…¶ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰è¿›è¡Œè®¡ç®—ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨å…¶å£°æ˜å‰æ ‡æ³¨ `lazy` ä¿®é¥°è¯­æ¥è¡¨ç¤ºä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§ã€‚

> ä½ å¿…é¡»æŠŠå»¶è¿Ÿå­˜å‚¨å±æ€§å£°æ˜ä¸ºå˜é‡ï¼ˆä½¿ç”¨ `var` å…³é”®å­—ï¼‰ï¼Œå› ä¸ºå®ƒçš„åˆå§‹å€¼å¯èƒ½åœ¨å®ä¾‹åˆå§‹åŒ–å®Œæˆä¹‹å‰æ— æ³•å–å¾—ã€‚å¸¸é‡å±æ€§åˆ™å¿…é¡»åœ¨åˆå§‹åŒ–å®Œæˆä¹‹å‰æœ‰å€¼ï¼Œå› æ­¤ä¸èƒ½å£°æ˜ä¸ºå»¶è¿Ÿã€‚

ä¸€ä¸ªå±æ€§çš„åˆå§‹å€¼å¯èƒ½ä¾èµ–äºæŸäº›å¤–éƒ¨å› ç´ ï¼Œå½“è¿™äº›å¤–éƒ¨å› ç´ çš„å€¼åªæœ‰åœ¨å®ä¾‹çš„åˆå§‹åŒ–å®Œæˆåæ‰èƒ½å¾—åˆ°æ—¶ï¼Œå»¶è¿Ÿå±æ€§å°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ã€‚è€Œå½“å±æ€§çš„åˆå§‹å€¼éœ€è¦æ‰§è¡Œå¤æ‚æˆ–ä»£ä»·é«˜æ˜‚çš„é…ç½®æ‰èƒ½è·å¾—ï¼Œä½ åˆæƒ³è¦åœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œï¼Œå»¶è¿Ÿå±æ€§å°±èƒ½å¤Ÿæ´¾ä¸Šç”¨åœºäº†ã€‚

ä¸‹é¢è¿™ä¸ªæ —å­ä½¿ç”¨äº†ä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±æ€§æ¥é¿å…å¤æ‚ç±»ä¸å¿…è¦çš„åˆå§‹åŒ–ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªåä¸º DartImporter å’Œ DartManager çš„ç±»ï¼Œä»–ä»¬éƒ½æ²¡æœ‰å®Œæ•´æ˜¾ç¤ºï¼š

```swift
class DataImporter {
    
    //DataImporter is a class to import data from an external file.
    //The class is assumed to take a non-trivial amount of time to initialize.
    
    var fileName = "data.txt"
    // the DataImporter class would provide data importing functionality here
}
 
class DataManager {
    lazy var importer = DataImporter()
    var data = [String]()
    // the DataManager class would provide data management functionality here
}
 
let manager = DataManager()
manager.data.append("Some data")
manager.data.append("Some more data")
// the DataImporter instance for the importer property has not yet been created
```

ç±» DataManager æœ‰ä¸€ä¸ªåä¸º data çš„å­˜å‚¨å±æ€§ï¼Œå®ƒè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºçš„æ–° String æ•°ç»„ã€‚å°½ç®¡å®ƒçš„å…¶ä½™åŠŸèƒ½æ²¡æœ‰å±•ç¤ºå‡ºæ¥ï¼Œè¿˜æ˜¯å¯ä»¥çŸ¥é“ç±» DataManager çš„ç›®çš„æ˜¯ç®¡ç†å¹¶æä¾›è®¿é—®è¿™ä¸ª String æ•°ç»„çš„æ–¹æ³•ã€‚

DataManager ç±»çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯ä»æ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚æ­¤åŠŸèƒ½ç”± DataImporter ç±»æä¾›ï¼Œå®ƒå‡å®šä¸ºéœ€è¦ä¸€å®šæ—¶é—´æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™å¤§æ¦‚æ˜¯å› ä¸º DataImporter å®ä¾‹åœ¨è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™éœ€è¦æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å…¶å†…å®¹åˆ°å†…å­˜ä¸­ã€‚

DataManager å®ä¾‹å¹¶ä¸è¦ä»æ–‡ä»¶å¯¼å…¥æ•°æ®å°±å¯ä»¥ç®¡ç†å…¶æ•°æ®çš„æƒ…å†µæ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ï¼Œæ‰€ä»¥å½“ DataManager æœ¬èº«åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰å¿…è¦å»å†åˆ›å»ºä¸€ä¸ªæ–°çš„ DataImporter å®ä¾‹ã€‚åä¹‹ï¼Œåœ¨ DataImporter ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»ºå®ƒæ‰æ›´æœ‰æ„ä¹‰ã€‚

å› ä¸ºå®ƒè¢« lazy ä¿®é¥°ç¬¦æ‰€æ ‡è®°ï¼Œåªæœ‰åœ¨ importer å±æ€§ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶æ‰ä¼šåˆ›å»º DataManager å®ä¾‹ï¼Œæ¯”å¦‚å½“æŸ¥è¯¢å®ƒçš„ fileName å±æ€§æ—¶ï¼š

```swift
print(manager.importer.fileName)
// the DataImporter instance for the importer property has now been created
// prints "data.txt"
```

> å¦‚æœè¢«æ ‡è®°ä¸º lazy ä¿®é¥°ç¬¦çš„å±æ€§åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®å¹¶ä¸”å±æ€§è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™æ— æ³•ä¿è¯å±æ€§åªåˆå§‹åŒ–ä¸€æ¬¡ã€‚

#### 1.3 å­˜å‚¨å±æ€§ä¸å®ä¾‹å˜é‡

å¦‚æœä½ æœ‰ Objective-C çš„å¼€å‘ç»éªŒï¼Œé‚£ä½ åº”è¯¥çŸ¥é“åœ¨ç±»å®ä¾‹é‡Œæœ‰ä¸¤ç§æ–¹æ³•æ¥å­˜å‚¨å€¼å’Œå¼•ç”¨ã€‚å¦å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨å®ä¾‹å˜é‡ä½œä¸ºå±æ€§ä¸­æ‰€å‚¨å­˜çš„å€¼çš„å¤‡ä»½å­˜å‚¨ã€‚

Swift æŠŠè¿™äº›æ¦‚å¿µéƒ½ç»Ÿä¸€åˆ°äº†å±æ€§å£°æ˜é‡Œã€‚Swift å±æ€§æ²¡æœ‰ä¸ä¹‹ç›¸å¯¹åº”çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”å±æ€§çš„åå¤‡å­˜å‚¨ä¸èƒ½è¢«ç›´æ¥è®¿é—®ã€‚è¿™é¿å…äº†ä¸åŒç¯å¢ƒä¸­å¯¹å€¼çš„è®¿é—®çš„æ··æ·†å¹¶ä¸”å°†å±æ€§çš„å£°æ˜ç®€åŒ–ä¸ºä¸€æ¡å•ä¸€çš„ã€é™å®šçš„è¯­å¥ã€‚æ‰€æœ‰å…³äºå±æ€§çš„ä¿¡æ¯â€”â€”åŒ…æ‹¬å®ƒçš„åå­—ï¼Œç±»å‹å’Œå†…å­˜ç®¡ç†ç‰¹å¾â€”â€”éƒ½ä½œä¸ºç±»çš„å®šä¹‰æ”¾åœ¨äº†åŒä¸€ä¸ªåœ°æ–¹ã€‚

### 2. è®¡ç®—å±æ€§

é™¤äº†å­˜å‚¨å±æ€§ï¼Œç±»ã€ç»“æ„ä½“å’Œæšä¸¾ä¹Ÿèƒ½å¤Ÿå®šä¹‰è®¡ç®—å±æ€§ï¼Œè€Œå®ƒå®é™…å¹¶ä¸å­˜å‚¨å€¼ã€‚ç›¸åï¼Œä»–ä»¬æä¾›ä¸€ä¸ª`è¯»å–å™¨`å’Œä¸€ä¸ª`å¯é€‰çš„è®¾ç½®å™¨`æ¥é—´æ¥å¾—åˆ°å’Œè®¾ç½®å…¶ä»–çš„å±æ€§å’Œå€¼ã€‚

```swift
struct Point {
    var x = 0.0, y = 0.0
}
struct Size {
    var width = 0.0, height = 0.0
}
struct Rect {
    var origin = Point()
    var size = Size()
    var center: Point {
        get {
            let centerX = origin.x + (size.width / 2)
            let centerY = origin.y + (size.height / 2)
            return Point(x: centerX, y: centerY)
        }
        set(newCenter) {
            origin.x = newCenter.x - (size.width / 2)
            origin.y = newCenter.y - (size.height / 2)
        }
    }
}
var square = Rect(origin: Point(x: 0.0, y: 0.0),
    size: Size(width: 10.0, height: 10.0))
let initialSquareCenter = square.center
square.center = Point(x: 15.0, y: 15.0)
print("square.origin is now at (\(square.origin.x), \(square.origin.y))")
// prints "square.origin is now at (10.0, 10.0)"
```

#### 2.1 ç®€å†™è®¾ç½®å™¨ï¼ˆsetterï¼‰å£°æ˜

å¦‚æœä¸€ä¸ªè®¡ç®—å±æ€§çš„è®¾ç½®å™¨æ²¡æœ‰ä¸ºå°†è¦è¢«è®¾ç½®çš„å€¼å®šä¹‰ä¸€ä¸ªåå­—ï¼Œé‚£ä¹ˆä»–å°†è¢«é»˜è®¤å‘½åä¸º `newValue` ã€‚ä¸‹é¢æ˜¯ç»“æ„ä½“ Rect çš„å¦ä¸€ç§å†™æ³•ï¼Œå…¶ä¸­åˆ©ç”¨äº†ç®€å†™è®¾ç½®å™¨å£°æ˜çš„ç‰¹æ€§ã€‚

```swift
struct AlternativeRect {
    var origin = Point()
    var size = Size()
    var center: Point {
        get {
            let centerX = origin.x + (size.width / 2)
            let centerY = origin.y + (size.height / 2)
            return Point(x: centerX, y: centerY)
        }
        set {
            origin.x = newValue.x - (size.width / 2)
            origin.y = newValue.y - (size.height / 2)
        }
    }
}
```

#### 2.2 åªè¯»è®¡ç®—å±æ€§

ä¸€ä¸ªæœ‰è¯»å–å™¨ä½†æ˜¯æ²¡æœ‰è®¾ç½®å™¨çš„è®¡ç®—å±æ€§å°±æ˜¯æ‰€è°“çš„åªè¯»è®¡ç®—å±æ€§ã€‚åªè¯»è®¡ç®—å±æ€§è¿”å›ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç‚¹è¯­æ³•è®¿é—®ï¼Œä½†æ˜¯ä¸èƒ½è¢«ä¿®æ”¹ä¸ºå¦ä¸€ä¸ªå€¼ã€‚

> ä½ å¿…é¡»ç”¨ `var` å…³é”®å­—å®šä¹‰è®¡ç®—å±æ€§â€”â€”åŒ…æ‹¬åªè¯»è®¡ç®—å±æ€§â€”â€”ä¸ºå˜é‡å±æ€§ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼ä¸æ˜¯å›ºå®šçš„ã€‚ `let` å…³é”®å­—åªç”¨äºå¸¸é‡å±æ€§ï¼Œç”¨äºæ˜ç¡®é‚£äº›å€¼ä¸€æ—¦ä½œä¸ºå®ä¾‹åˆå§‹åŒ–å°±ä¸èƒ½æ›´æ”¹ã€‚

ä½ å¯ä»¥é€šè¿‡å»æ‰ get å…³é”®å­—å’Œä»–çš„å¤§æ‰©å·æ¥ç®€åŒ–åªè¯»è®¡ç®—å±æ€§çš„å£°æ˜ï¼š

```swift
struct Cuboid {
    var width = 0.0, height = 0.0, depth = 0.0
    var volume: Double {
        return width * height * depth
    }
}
let fourByFiveByTwo = Cuboid(width: 4.0, height: 5.0, depth: 2.0)
print("the volume of fourByFiveByTwo is \(fourByFiveByTwo.volume)")
// prints "the volume of fourByFiveByTwo is 40.0"
```

è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º Cuboid çš„æ–°ç»“æ„ä½“ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªæœ‰ width ï¼Œ height å’Œ depth å±æ€§çš„ä¸‰ç»´é•¿æ–¹å½¢ç»“æ„ã€‚è¿™ä¸ªç»“æ„ä½“è¿˜æœ‰ä¸€ä¸ªåä¸º volume çš„åªè¯»è®¡ç®—å±æ€§ï¼Œå®ƒè®¡ç®—å¹¶è¿”å›é•¿æ–¹ä½“çš„å½“å‰ä½“ç§¯ã€‚å¯¹äº volume å±æ€§æ¥è¯´å¯è¢«è®¾ç½®å¹¶æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå®ƒä¼šæ˜ç¡® width ï¼Œ height å’Œ depth ä¸­å“ªä¸ªå€¼ç”¨åœ¨ç‰¹å®šçš„ volume å€¼ä¸­ï¼Œå¯¹ Cuboid æ¥è¯´æä¾›ä¸€ä¸ªåªè¯»è®¡ç®—å±æ€§æ¥è®©å¤–éƒ¨ç”¨æˆ·æ¥å‘ç°å®ƒçš„å½“å‰è®¡ç®—ä½“ç§¯å°±æ˜¾å¾—å¾ˆæœ‰ç”¨äº†ã€‚

### 3. å±æ€§è§‚å¯Ÿè€…

å±æ€§è§‚å¯Ÿè€…ä¼šè§‚å¯Ÿå¹¶å¯¹å±æ€§å€¼çš„å˜åŒ–åšå‡ºå›åº”ã€‚æ¯å½“ä¸€ä¸ªå±æ€§çš„å€¼è¢«è®¾ç½®æ—¶ï¼Œå±æ€§è§‚å¯Ÿè€…éƒ½ä¼šè¢«è°ƒç”¨ï¼Œå³ä½¿è¿™ä¸ªå€¼ä¸è¯¥å±æ€§å½“å‰çš„å€¼ç›¸åŒã€‚

ä½ å¯ä»¥ä¸ºä½ å®šä¹‰çš„ä»»æ„**å­˜å‚¨å±æ€§**æ·»åŠ å±æ€§è§‚å¯Ÿè€…ï¼Œé™¤äº†**å»¶è¿Ÿå­˜å‚¨å±æ€§**ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡åœ¨å­ç±»é‡Œé‡å†™å±æ€§æ¥ä¸ºä»»ä½•ç»§æ‰¿å±æ€§ï¼ˆæ— è®ºæ˜¯å­˜å‚¨å±æ€§è¿˜æ˜¯è®¡ç®—å±æ€§ï¼‰æ·»åŠ å±æ€§è§‚å¯Ÿè€…ã€‚å±æ€§é‡è½½å°†ä¼šåœ¨[é‡å†™](#rewrite)ä¸­è¯¦ç»†æè¿°ã€‚

> ä½ ä¸éœ€è¦ä¸ºéé‡å†™çš„è®¡ç®—å±æ€§å®šä¹‰å±æ€§è§‚å¯Ÿè€…ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨è®¡ç®—å±æ€§çš„è®¾ç½®å™¨é‡Œç›´æ¥è§‚å¯Ÿå’Œç›¸åº”å®ƒä»¬å€¼çš„æ”¹å˜ã€‚

ä½ å¯ä»¥é€‰æ‹©å°†è¿™äº›è§‚å¯Ÿè€…æˆ–å…¶ä¸­ä¹‹ä¸€å®šä¹‰åœ¨å±æ€§ä¸Šï¼š

* `willSet` ä¼šåœ¨è¯¥å€¼è¢«å­˜å‚¨ä¹‹å‰è¢«è°ƒç”¨ã€‚
* `didSet` ä¼šåœ¨ä¸€ä¸ªæ–°å€¼è¢«å­˜å‚¨åè¢«è°ƒç”¨ã€‚

å¦‚æœä½ å®ç°äº†ä¸€ä¸ª `willSet` è§‚å¯Ÿè€…ï¼Œæ–°çš„å±æ€§å€¼ä¼šä»¥å¸¸é‡å½¢å¼å‚æ•°ä¼ é€’ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ `willSet` å®ç°ä¸­ä¸ºè¿™ä¸ªå‚æ•°å®šä¹‰åå­—ã€‚å¦‚æœä½ æ²¡æœ‰ä¸ºå®ƒå‘½åï¼Œé‚£ä¹ˆå®ƒä¼šä½¿ç”¨é»˜è®¤çš„åå­— `newValue` ã€‚

åŒæ ·ï¼Œå¦‚æœä½ å®ç°äº†ä¸€ä¸ª `didSet` è§‚å¯Ÿè€…ï¼Œä¸€ä¸ªåŒ…å«æ—§å±æ€§å€¼çš„å¸¸é‡å½¢å¼å‚æ•°å°†ä¼šè¢«ä¼ é€’ã€‚ä½ å¯ä»¥ä¸ºå®ƒå‘½åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„å½¢å¼å‚æ•°å `oldValue` ã€‚å¦‚æœä½ åœ¨å±æ€§è‡ªå·±çš„ `didSet` è§‚å¯Ÿè€…é‡Œç»™è‡ªå·±èµ‹å€¼ï¼Œä½ èµ‹å€¼çš„æ–°å€¼å°±ä¼šå–ä»£åˆšåˆšè®¾ç½®çš„å€¼ã€‚

> çˆ¶ç±»å±æ€§çš„ `willSet` å’Œ `didSet` è§‚å¯Ÿè€…ä¼šåœ¨å­ç±»åˆå§‹åŒ–å™¨ä¸­è®¾ç½®æ—¶è¢«è°ƒç”¨ã€‚å®ƒä»¬ä¸ä¼šåœ¨ç±»çš„çˆ¶ç±»åˆå§‹åŒ–å™¨è°ƒç”¨ä¸­è®¾ç½®å…¶è‡ªèº«å±æ€§æ—¶è¢«è°ƒç”¨ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªå…³äº `willSet` å’Œ `didSet` çš„ä½¿ç”¨æ —å­ã€‚ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º StepCounter çš„æ–°ç±»ï¼Œå®ƒè¿½è¸ªäººæ•£æ­¥çš„æ€»æ•°é‡ã€‚è¿™ä¸ªç±»å¯èƒ½ä¼šç”¨äºä»è®¡æ­¥å™¨æˆ–è€…å…¶ä»–è®¡æ­¥å·¥å…·å¯¼å…¥æ•°æ®æ¥è¿½è¸ªäººæ—¥å¸¸çš„é”»ç‚¼æƒ…å†µã€‚

```swift
class StepCounter {
    var totalSteps: Int = 0 {
        willSet(newTotalSteps) {
            print("About to set totalSteps to \(newTotalSteps)")
        }
        didSet {
            if totalSteps > oldValue  {
                print("Added \(totalSteps - oldValue) steps")
            }
        }
    }
}
let stepCounter = StepCounter()
stepCounter.totalSteps = 200
// About to set totalSteps to 200
// Added 200 steps
stepCounter.totalSteps = 360
// About to set totalSteps to 360
// Added 160 steps
stepCounter.totalSteps = 896
// About to set totalSteps to 896
// Added 536 steps
```

StepCounter ç±»å£°æ˜äº†ä¸€ä¸ª Int ç±»å‹çš„ totalSteps å±æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«äº† willSet å’Œ didSet è§‚å¯Ÿè€…çš„å‚¨å­˜å±æ€§ã€‚
totalSteps çš„ willSet å’Œ didSet è§‚å¯Ÿè€…ä¼šåœ¨æ¯æ¬¡å±æ€§è¢«èµ‹æ–°å€¼çš„æ—¶å€™è°ƒç”¨ã€‚å°±ç®—æ–°å€¼ä¸å½“å‰å€¼å®Œå…¨ç›¸åŒä¹Ÿä¼šå¦‚æ­¤ã€‚

æ —å­ä¸­çš„ willSet è§‚å¯Ÿè€…ä¸ºå¢é‡çš„æ–°å€¼ä½¿ç”¨è‡ªå®šä¹‰çš„å½¢å¼å‚æ•°å newTotalSteps ï¼Œå®ƒåªæ˜¯ç®€å•çš„æ‰“å°å‡ºå°†è¦è®¾ç½®çš„å€¼ã€‚

didSet è§‚å¯Ÿè€…åœ¨ totalSteps çš„å€¼æ›´æ–°åè°ƒç”¨ã€‚å®ƒç”¨æ—§å€¼å¯¹æ¯” totalSteps çš„æ–°å€¼ã€‚å¦‚æœæ€»æ­¥æ•°å¢åŠ äº†ï¼Œå°±æ‰“å°ä¸€æ¡ä¿¡æ¯æ¥è¡¨ç¤ºæ¥æ”¶äº†å¤šå°‘æ–°çš„æ­¥æ•°ã€‚ didSet è§‚å¯Ÿè€…ä¸ä¼šæä¾›è‡ªå®šä¹‰çš„å½¢å¼å‚æ•°åç»™æ—§å€¼ï¼Œè€Œæ˜¯ä½¿ç”¨ oldValue è¿™ä¸ªé»˜è®¤çš„åå­—ã€‚

> å¦‚æœä½ ä»¥è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°ä¼ ä¸€ä¸ªæ‹¥æœ‰è§‚å¯Ÿè€…çš„å±æ€§ç»™å‡½æ•°ï¼Œ willSet å’Œ didSet è§‚å¯Ÿè€…ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚è¿™æ˜¯ç”±äºè¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°çš„æ‹·è´å…¥æ‹·è´å‡ºå­˜å‚¨æ¨¡å‹å¯¼è‡´çš„ï¼šå€¼ä¸€å®šä¼šåœ¨å‡½æ•°ç»“æŸåå†™å›å±æ€§ã€‚


### 4. å…¨å±€å’Œå±€éƒ¨å˜é‡

ä¸Šè¾¹æè¿°çš„è®¡ç®—å±æ€§å’Œè§‚å¯Ÿå±æ€§çš„èƒ½åŠ›åŒæ ·å¯¹å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡æœ‰æ•ˆã€‚å…¨å±€å˜é‡æ˜¯å®šä¹‰åœ¨ä»»ä½•å‡½æ•°ã€æ–¹æ³•ã€é—­åŒ…æˆ–è€…ç±»å‹ç¯å¢ƒä¹‹å¤–çš„å˜é‡ã€‚å±€éƒ¨å˜é‡æ˜¯å®šä¹‰åœ¨å‡½æ•°ã€æ–¹æ³•æˆ–è€…é—­åŒ…ç¯å¢ƒä¹‹ä¸­çš„å˜é‡ã€‚

ä½ åœ¨ä¹‹å‰ç« èŠ‚ä¸­æ‰€é‡åˆ°çš„å…¨å±€å’Œå±€éƒ¨å˜é‡éƒ½æ˜¯å­˜å‚¨å˜é‡ã€‚å­˜å‚¨å˜é‡ï¼Œç±»ä¼¼äºå­˜å‚¨å±æ€§ï¼Œä¸ºç‰¹å®šç±»å‹çš„å€¼æä¾›å­˜å‚¨å¹¶ä¸”å…è®¸è¿™ä¸ªå€¼è¢«è®¾ç½®å’Œå–å›ã€‚

æ€»ä¹‹ï¼Œä½ åŒæ ·å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ä»¥åŠç»™å­˜å‚¨å˜é‡å®šä¹‰è§‚å¯Ÿè€…ï¼Œæ— è®ºæ˜¯å…¨å±€è¿˜æ˜¯å±€éƒ¨ç¯å¢ƒã€‚è®¡ç®—å˜é‡è®¡ç®—è€Œä¸æ˜¯å­˜å‚¨å€¼ï¼Œå¹¶ä¸”ä¸è®¡ç®—å±æ€§çš„å†™æ³•ä¸€è‡´ã€‚

> å…¨å±€å¸¸é‡å’Œå˜é‡æ°¸è¿œæ˜¯å»¶è¿Ÿè®¡ç®—çš„ï¼Œä¸å»¶è¿Ÿå­˜å‚¨å±æ€§æœ‰ç€ç›¸åŒçš„è¡Œä¸ºã€‚ä¸åŒäºå»¶è¿Ÿå­˜å‚¨å±æ€§ï¼Œå…¨å±€å¸¸é‡å’Œå˜é‡ä¸éœ€è¦æ ‡è®° `lazy` ä¿®é¥°ç¬¦ã€‚

### 5. ç±»å‹å±æ€§

å®ä¾‹å±æ€§æ˜¯å±äºç‰¹å®šç±»å‹å®ä¾‹çš„å±æ€§ã€‚æ¯æ¬¡ä½ åˆ›å»ºè¿™ä¸ªç±»å‹çš„æ–°å®ä¾‹ï¼Œå®ƒå°±æ‹¥æœ‰ä¸€å †å±æ€§å€¼ï¼Œä¸å…¶ä»–å®ä¾‹ä¸åŒã€‚

ä½ åŒæ ·å¯ä»¥å®šä¹‰å±äºç±»å‹æœ¬èº«çš„å±æ€§ï¼Œä¸æ˜¯è¿™ä¸ªç±»å‹çš„æŸä¸€ä¸ªå®ä¾‹çš„å±æ€§ã€‚è¿™ä¸ªå±æ€§åªæœ‰ä¸€ä¸ªæ‹·è´ï¼Œæ— è®ºä½ åˆ›å»ºäº†å¤šå°‘ä¸ªç±»å¯¹åº”çš„å®ä¾‹ã€‚è¿™æ ·çš„å±æ€§å«åšç±»å‹å±æ€§ã€‚

ç±»å‹å±æ€§åœ¨å®šä¹‰é‚£äº›å¯¹ç‰¹å®šç±»å‹çš„æ‰€æœ‰å®ä¾‹éƒ½é€šç”¨çš„å€¼çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚å®ä¾‹è¦ä½¿ç”¨çš„å¸¸é‡å±æ€§ï¼ˆç±»ä¼¼ C é‡Œçš„é™æ€å¸¸é‡ï¼‰ï¼Œæˆ–è€…å‚¨å­˜å¯¹è¿™ä¸ªç±»å‹çš„æ‰€æœ‰å®ä¾‹å…¨å±€å¯è§çš„å€¼çš„å­˜å‚¨å±æ€§ï¼ˆç±»ä¼¼ C é‡Œçš„é™æ€å˜é‡ï¼‰ã€‚

å­˜å‚¨ç±»å‹å±æ€§å¯ä»¥æ˜¯å˜é‡æˆ–è€…å¸¸é‡ã€‚è®¡ç®—ç±»å‹å±æ€§æ€»è¦è¢«å£°æ˜ä¸ºå˜é‡å±æ€§ï¼Œä¸è®¡ç®—å®ä¾‹å±æ€§ä¸€è‡´ã€‚

> ä¸åŒäºå­˜å‚¨å®ä¾‹å±æ€§ï¼Œä½ å¿…é¡»æ€»æ˜¯ç»™å­˜å‚¨ç±»å‹å±æ€§ä¸€ä¸ªé»˜è®¤å€¼ã€‚è¿™æ˜¯å› ä¸ºç±»å‹æœ¬èº«ä¸èƒ½æ‹¥æœ‰èƒ½å¤Ÿåœ¨åˆå§‹åŒ–æ—¶ç»™å­˜å‚¨ç±»å‹å±æ€§èµ‹å€¼çš„åˆå§‹åŒ–å™¨ã€‚
> 
> å­˜å‚¨ç±»å‹å±æ€§æ˜¯åœ¨å®ƒä»¬ç¬¬ä¸€æ¬¡è®¿é—®æ—¶å»¶è¿Ÿåˆå§‹åŒ–çš„ã€‚å®ƒä»¬ä¿è¯åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå°±ç®—è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œä»–ä»¬ä¹Ÿä¸éœ€è¦ä½¿ç”¨ lazy ä¿®é¥°ç¬¦æ ‡è®°ã€‚

#### 5.1 ç±»å‹å±æ€§è¯­æ³•

åœ¨ C å’Œ  Objective-C ä¸­ï¼Œä½ ä½¿ç”¨å…¨å±€é™æ€å˜é‡æ¥å®šä¹‰ä¸€ä¸ªä¸ç±»å‹å…³è”çš„é™æ€å¸¸é‡å’Œå˜é‡ã€‚åœ¨ Swift ä¸­ï¼Œæ€»ä¹‹ï¼Œç±»å‹å±æ€§æ˜¯å†™åœ¨ç±»å‹çš„å®šä¹‰ä¹‹ä¸­çš„ï¼Œåœ¨ç±»å‹çš„èŠ±æ‹¬å·é‡Œï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªç±»å‹å±æ€§éƒ½æ˜¾å¼åœ°æ”¾åœ¨å®ƒæ”¯æŒçš„ç±»å‹èŒƒå›´å†…ã€‚

ä½¿ç”¨ `static` å…³é”®å­—æ¥å¼€ä¸€ç±»å‹å±æ€§ã€‚å¯¹äºç±»ç±»å‹çš„è®¡ç®—ç±»å‹å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ `class` å…³é”®å­—æ¥å…è®¸å­ç±»é‡å†™çˆ¶ç±»çš„å®ç°ã€‚ä¸‹é¢çš„æ —å­å±•ç¤ºäº†å­˜å‚¨å’Œè®¡ç®—ç±»å‹å±æ€§çš„è¯­æ³•ï¼š

```swift 
struct SomeStructure {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 1
    }
}
enum SomeEnumeration {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 6
    }
}
class SomeClass {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 27
    }
    class var overrideableComputedTypeProperty: Int {
        return 107
    }
}
```

#### 5.2 æŸ¥è¯¢å’Œè®¾ç½®ç±»å‹å±æ€§

ç±»å‹å±æ€§ä½¿ç”¨ç‚¹è¯­æ³•æ¥æŸ¥è¯¢å’Œè®¾ç½®ï¼Œä¸ç±»å‹å±æ€§ä¸€è‡´ã€‚æ€»ä¹‹ï¼Œç±»å‹å±æ€§åœ¨ç±»é‡ŒæŸ¥è¯¢å’Œè®¾ç½®ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç±»å‹çš„å®ä¾‹ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š

```swift
print(SomeStructure.storedTypeProperty)
// prints "Some value."
SomeStructure.storedTypeProperty = "Another value."
print(SomeStructure.storedTypeProperty)
// prints "Another value."
print(SomeEnumeration.computedTypeProperty)
// prints "6"
print(SomeClass.computedTypeProperty)
// prints "27"
```

## æ–¹æ³•

### 1 å®ä¾‹æ–¹æ³•
#### 1.1 self å±æ€§

<p id = "change_value"></p>
#### 1.2 åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»å‹

ç»“æ„ä½“å’Œæšä¸¾æ˜¯å€¼ç±»å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ**å€¼ç±»å‹å±æ€§ä¸èƒ½è¢«è‡ªèº«çš„å®ä¾‹æ–¹æ³•ä¿®æ”¹**ã€‚

æ€»ä¹‹ï¼Œå¦‚æœä½ éœ€è¦åœ¨ç‰¹å®šçš„æ–¹æ³•ä¸­ä¿®æ”¹ç»“æ„ä½“æˆ–è€…æšä¸¾çš„å±æ€§ï¼Œä½ å¯ä»¥é€‰æ‹©å°†è¿™ä¸ªæ–¹æ³•å¼‚å˜ã€‚ç„¶åè¿™ä¸ªæ–¹æ³•å°±å¯ä»¥åœ¨æ–¹æ³•ä¸­å¼‚å˜ï¼ˆå—¯ï¼Œæ”¹å˜ï¼‰å®ƒçš„å±æ€§äº†ï¼Œå¹¶ä¸”ä»»ä½•æ”¹å˜åœ¨æ–¹æ³•ç»“æŸçš„æ—¶å€™éƒ½ä¼šå†™å…¥åˆ°åŸå§‹çš„ç»“æ„ä½“ä¸­ã€‚æ–¹æ³•åŒæ ·å¯ä»¥æŒ‡å®šä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ç»™å®ƒéšå«çš„selfå±æ€§ï¼Œå¹¶ä¸”è¿™ä¸ªæ–°çš„å®ä¾‹å°†ä¼šåœ¨æ–¹æ³•ç»“æŸçš„æ—¶å€™æ›¿æ¢æ‰ç°å­˜çš„è¿™ä¸ªå®ä¾‹ã€‚

ä½ å¯ä»¥é€‰æ‹©åœ¨ `func`å…³é”®å­—å‰æ”¾ä¸€ä¸ª `mutating`å…³é”®å­—æ¥ä½¿ç”¨è¿™ä¸ªè¡Œä¸ºï¼š

```swift
struct Point {
    var x = 0.0, y = 0.0
    mutating func moveBy(x deltaX: Double, y deltaY: Double) {
        x += deltaX
        y += deltaY
    }
}
var somePoint = Point(x: 1.0, y: 1.0)
somePoint.moveBy(x: 2.0, y: 3.0)
print("The point is now at (\(somePoint.x), \(somePoint.y))")
// prints "The point is now at (3.0, 4.0)"
```

ä¸Šæ–‡ä¸­çš„ Point ç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªå¼‚å˜æ–¹æ³• moveBy(x:y:)ï¼Œå®ƒä»¥ç‰¹å®šçš„æ•°å€¼ç§»åŠ¨ä¸€ä¸ª Pointå®ä¾‹ã€‚ç›¸æ¯”äºè¿”å›ä¸€ä¸ªæ–°çš„ç‚¹ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¿®æ”¹äº†è°ƒç”¨å®ƒçš„ç‚¹ã€‚ è¢«æ·»åŠ åˆ°å®šä¹‰ä¸­çš„ mutatingå…³é”®å­—å…è®¸å®ƒä¿®æ”¹è‡ªèº«çš„å±æ€§ã€‚

æ³¨æ„ï¼Œå¦‚åŒ[å¸¸é‡ç»“æ„ä½“å®ä¾‹çš„å­˜å‚¨å±æ€§](#const_struct_property)é‡Œæè¿°çš„é‚£æ ·ï¼Œä½ ä¸èƒ½åœ¨å¸¸é‡ç»“æ„ä½“ç±»å‹é‡Œè°ƒç”¨å¼‚å˜æ–¹æ³•ï¼Œå› ä¸ºè‡ªèº«å±æ€§ä¸èƒ½è¢«æ”¹å˜ï¼Œå°±ç®—å®ƒä»¬æ˜¯å˜é‡å±æ€§ï¼š

```swift
let fixedPoint = Point(x: 3.0, y: 3.0)
fixedPoint.moveBy(x: 2.0, y: 3.0)
// this will report an error
```

#### 1.3 åœ¨å¼‚å˜æ–¹æ³•é‡ŒæŒ‡å®šè‡ªèº«
### 2 ç±»å‹æ–¹æ³•

## ä¸‹æ ‡
## ç»§æ‰¿

### 1 å®šä¹‰ä¸€ä¸ªåŸºç±»
### 2 å­ç±»

<p id = "rewrite"></p>
### 3 é‡å†™

å­ç±»å¯ä»¥æä¾›å®ƒè‡ªå·±çš„å®ä¾‹æ–¹æ³•ã€ç±»å‹æ–¹æ³•ã€å®ä¾‹å±æ€§ï¼Œç±»å‹å±æ€§æˆ–ä¸‹æ ‡è„šæœ¬çš„è‡ªå®šä¹‰å®ç°ï¼Œå¦åˆ™å®ƒå°†ä¼šä»çˆ¶ç±»ç»§æ‰¿ã€‚è¿™å°±æ‰€è°“çš„é‡å†™ã€‚

è¦é‡å†™è€Œä¸æ˜¯ç»§æ‰¿ä¸€ä¸ªç‰¹å¾ï¼Œä½ éœ€è¦åœ¨ä½ çš„é‡å†™å®šä¹‰å‰é¢åŠ ä¸Š override å…³é”®å­—ã€‚è¿™æ ·åšè¯´æ˜ä½ æ‰“ç®—æä¾›ä¸€ä¸ªé‡å†™è€Œä¸æ˜¯æ„å¤–æä¾›äº†ä¸€ä¸ªç›¸åŒå®šä¹‰ã€‚æ„å¤–çš„é‡å†™å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºï¼Œå¹¶ä¸”ä»»ä½•æ²¡æœ‰ä½¿ç”¨ override å…³é”®å­—çš„é‡å†™éƒ½ä¼šåœ¨ç¼–è¯‘æ—¶è¢«è¯Šæ–­ä¸ºé”™è¯¯ã€‚

override å…³é”®å­—ä¼šæ‰§è¡Œ Swift ç¼–è¯‘å™¨æ£€æŸ¥ä½ é‡å†™çš„ç±»çš„çˆ¶ç±»(æˆ–è€…çˆ¶ç±»çš„çˆ¶ç±»)æ˜¯å¦æœ‰ä¸ä¹‹åŒ¹é…çš„å£°æ˜æ¥ä¾›ä½ é‡å†™ã€‚è¿™ä¸ªæ£€æŸ¥ç¡®ä¿ä½ é‡å†™çš„å®šä¹‰æ˜¯æ­£ç¡®çš„ã€‚

#### 3.1 è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬
#### 3.2 é‡å†™æ–¹æ³•
#### 3.3 é‡å†™å±æ€§
#### 3.3.1 é‡å†™å±æ€§çš„Getterå’ŒSetter
#### 3.4 é‡å†™å±æ€§è§‚å¯Ÿå™¨
### 4 é˜»æ­¢é‡å†™

## åˆå§‹åŒ–

<p id = "default_value"></p>
### é»˜è®¤çš„å±æ€§å€¼

å¦‚ä¸Šæ‰€è¿°ï¼Œä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹å€¼ã€‚å¦å¤–ï¼ŒæŒ‡å®šä¸€ä¸ªé»˜è®¤å±æ€§å€¼ä½œä¸ºå±æ€§å£°æ˜çš„ä¸€éƒ¨åˆ†ã€‚å½“å±æ€§è¢«å®šä¹‰çš„æ—¶å€™ä½ å¯ä»¥é€šè¿‡ä¸ºè¿™ä¸ªå±æ€§åˆ†é…ä¸€ä¸ªåˆå§‹å€¼æ¥æŒ‡å®šé»˜è®¤çš„å±æ€§å€¼ã€‚

> å¦‚æœä¸€ä¸ªå±æ€§ä¸€ç›´ä¿æŒç›¸åŒçš„åˆå§‹å€¼ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–å™¨é‡Œè®¾ç½®è¿™ä¸ªå€¼ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯é»˜è®¤å€¼å°†å±æ€§çš„åˆå§‹åŒ–ä¸å£°æ˜æ›´ç´§å¯†åœ°è”ç³»åˆ°ä¸€èµ·ã€‚å®ƒä½¿å¾—ä½ çš„åˆå§‹åŒ–å™¨æ›´çŸ­æ›´æ¸…æ™°ï¼Œå¹¶ä¸”å¯ä»¥è®©ä½ å±æ€§æ ¹æ®é»˜è®¤å€¼æ¨æ–­ç±»å‹ã€‚å¦‚åè¾¹çš„ç« èŠ‚æ‰€è¿°ï¼Œé»˜è®¤å€¼ä¹Ÿè®©ä½ ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œåˆå§‹åŒ–å™¨ç»§æ‰¿æ›´åŠ å®¹æ˜“ã€‚

é€šè¿‡æä¾› `temperature` å±æ€§çš„é»˜è®¤å€¼ï¼Œä½ å¯ä»¥æŠŠä¸Šé¢çš„ `Fahrenheit` ç»“æ„ä½“å†™çš„æ›´ç®€å•ï¼š

```swift
struct Fahrenheit {
    var temperature = 32.0
}
```

<p id = "init_value"></p>
### åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§

åœ¨åˆå§‹åŒ–çš„ä»»æ„æ—¶åˆ»ï¼Œä½ éƒ½å¯ä»¥ç»™å¸¸é‡å±æ€§èµ‹å€¼ï¼Œåªè¦å®ƒåœ¨åˆå§‹åŒ–ç»“æŸæ—¶è®¾ç½®äº†ç¡®å®šçš„å€¼å³å¯ã€‚ä¸€æ—¦ä¸ºå¸¸é‡å±æ€§è¢«èµ‹å€¼ï¼Œå®ƒå°±ä¸èƒ½å†è¢«ä¿®æ”¹äº†ã€‚

> å¯¹äºç±»å®ä¾‹æ¥è¯´ï¼Œå¸¸é‡å±æ€§åœ¨åˆå§‹åŒ–ä¸­åªèƒ½é€šè¿‡å¼•ç”¨çš„ç±»æ¥ä¿®æ”¹ã€‚å®ƒä¸èƒ½è¢«å­ç±»ä¿®æ”¹ã€‚

ä½ å¯ä»¥ä¿®æ”¹ä¸Šé¢ `SurveyQuestion` çš„ä¾‹å­ï¼Œç»™ `text` ä½¿ç”¨å¸¸é‡å±æ€§è€Œä¸æ˜¯å˜é‡å±æ€§æ¥è¡¨ç¤ºé—®é¢˜ï¼Œæ¥æ˜ç¡®ä¸€æ—¦ `SurveyQuestion` çš„å®ä¾‹è¢«åˆ›å»ºï¼Œé‚£ä¸ªé—®é¢˜å°†ä¸ä¼šæ”¹å˜ã€‚å°½ç®¡ç°åœ¨ `text` å±æ€§æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä½†æ˜¯å®ƒä¾ç„¶å¯ä»¥åœ¨ç±»çš„åˆå§‹åŒ–å™¨é‡Œè®¾ç½®ï¼š

```swift
class SurveyQuestion {
    let text: String
    var response: String?
    init(text: String) {
        self.text = text
    }
    func ask() {
        print(text)
    }
}
let beetsQuestion = SurveyQuestion(text: "How about beets?")
beetsQuestion.ask()
// prints "How about beets?"
beetsQuestion.response = "I also like beets. (But not with cheese.)"
```

## ååˆå§‹åŒ–
## è‡ªåŠ¨å¼•ç”¨è®¡æ•°
## å¯é€‰é“¾
## é”™è¯¯å¤„ç†
## ç±»å‹è½¬æ¢
## å†…åµŒç±»å‹
## æ‰©å±•

æ‰©å±•ä¸ºç°æœ‰çš„ç±»ã€ç»“æ„ä½“ã€æšä¸¾ç±»å‹ã€æˆ–åè®®æ·»åŠ äº†æ–°åŠŸèƒ½ã€‚è¿™ä¹ŸåŒ…æ‹¬äº†ä¸ºæ— è®¿é—®æƒé™çš„æºä»£ç æ‰©å±•ç±»å‹çš„èƒ½åŠ›ï¼ˆå³æ‰€è°“çš„é€†å‘å»ºæ¨¡ï¼‰ã€‚æ‰©å±•å’Œ Objective-C ä¸­çš„åˆ†ç±»ç±»ä¼¼ã€‚ï¼ˆä¸ Objective-C çš„åˆ†ç±»ä¸åŒçš„æ˜¯ï¼ŒSwift çš„æ‰©å±•æ²¡æœ‰åå­—ã€‚ï¼‰

Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š

* æ·»åŠ è®¡ç®—å®ä¾‹å±æ€§å’Œè®¡ç®—ç±»å‹å±æ€§ï¼›
* å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ï¼›
* æä¾›æ–°åˆå§‹åŒ–å™¨ï¼›
* å®šä¹‰ä¸‹æ ‡ï¼›
* å®šä¹‰å’Œä½¿ç”¨æ–°å†…åµŒç±»å‹ï¼›
* ä½¿ç°æœ‰çš„ç±»å‹éµå¾ªæŸåè®®

åœ¨ Swift ä¸­ï¼Œä½ ç”šè‡³å¯ä»¥æ‰©å±•ä¸€ä¸ªåè®®ï¼Œä»¥æä¾›å…¶è¦æ±‚çš„å®ç°æˆ–æ·»åŠ ç¬¦åˆç±»å‹çš„é™„åŠ åŠŸèƒ½ã€‚

> æ‰©å±•å¯ä»¥å‘ä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„æ–¹æ³•ã€‚

### 1 æ‰©å±•çš„è¯­æ³•

ä½¿ç”¨ `extension` å…³é”®å­—æ¥å£°æ˜æ‰©å±•ï¼š

```swift
extension SomeType {
    // new functionality to add to SomeType goes here
}
```

æ‰©å±•å¯ä»¥ä½¿å·²æœ‰çš„ç±»å‹éµå¾ªä¸€ä¸ªæˆ–å¤šä¸ªåè®®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåè®®åçš„ä¹¦å†™æ–¹å¼ä¸ç±»æˆ–ç»“æ„ä½“å®Œå…¨ä¸€æ ·ï¼š

```swift
extension SomeType: SomeProtocol, AnotherProtocol {
    // implementation of protocol requirements goes here
}
```

ç”¨è¿™ç§æ–¹å¼æ·»åŠ åè®®ä¸€è‡´æ€§è¯¦è§åœ¨æ‰©å±•é‡Œæ·»åŠ åè®®éµå¾ªã€‚

å¦‚åŒæ‰©å±•ä¸€ä¸ªæ³›å‹ç±»å‹ä¸­æè¿°çš„é‚£æ ·ï¼Œæ‰©å±•å¯ä»¥ç”¨äºä¸°å¯Œç°æœ‰æ³›å‹ç±»å‹ã€‚å¦‚åŒå¸¦æœ‰æ³›å‹ Where åˆ†å¥çš„æ‰©å±•ä¸­æè¿°çš„é‚£æ ·ï¼Œä½ ä¹Ÿå¯ä»¥å¯é€‰åœ°ç»™æ³›å‹æ·»åŠ åŠŸèƒ½ã€‚

> å¦‚æœä½ å‘å·²å­˜åœ¨çš„ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œæ–°åŠŸèƒ½ä¼šåœ¨è¯¥ç±»å‹çš„æ‰€æœ‰å®ä¾‹ä¸­å¯ç”¨ï¼Œå³ä½¿å®ä¾‹åœ¨è¯¥æ‰©å±•å®šä¹‰ä¹‹å‰å°±å·²ç»åˆ›å»ºã€‚

### 2 è®¡ç®—å±æ€§

æ‰©å±•å¯ä»¥å‘å·²æœ‰çš„ç±»å‹æ·»åŠ è®¡ç®—å®ä¾‹å±æ€§å’Œè®¡ç®—ç±»å‹å±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­å‘ Swift å†…å»ºçš„ Double ç±»å‹æ·»åŠ äº†äº”ä¸ªè®¡ç®—å®ä¾‹å±æ€§ï¼Œä»¥æä¾›å¯¹è·ç¦»å•ä½çš„åŸºæœ¬æ”¯æŒï¼š

```swift
extension Double {
    var km: Double { return self * 1_000.0 }
    var m: Double { return self }
    var cm: Double { return self / 100.0 }
    var mm: Double { return self / 1_000.0 }
    var ft: Double { return self / 3.28084 }
}
let oneInch = 25.4.mm
print("One inch is \(oneInch) meters")
// Prints "One inch is 0.0254 meters"
let threeFeet = 3.ft
print("Three feet is \(threeFeet) meters")
// Prints "Three feet is 0.914399970739201 meters"
```

è¿™äº›è®¡ç®—å±æ€§è¡¨è¿°äº† Double å€¼åº”è¢«çœ‹ä½œæ˜¯ç¡®å®šçš„é•¿åº¦å•ä½ã€‚å°½ç®¡å®ƒä»¬è¢«å®ç°ä¸ºè®¡ç®—å±æ€§ï¼Œè¿™äº›å±æ€§çš„åå­—ä»å¯ä½¿ç”¨ç‚¹ç¬¦å·æ·»åŠ åœ¨æµ®ç‚¹å‹çš„å­—é¢é‡ä¹‹åï¼Œä½œä¸ºä¸€ç§ä½¿ç”¨è¯¥å­—é¢é‡æ¥æ‰§è¡Œè·ç¦»è½¬æ¢çš„æ–¹æ³•ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸€ä¸ª 1.0 çš„ Double å€¼è¡¨ç¤ºâ€œä¸€ç±³â€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ m è®¡ç®—å±æ€§è¦è¿”å› self â€”â€”è¡¨è¾¾å¼ 1.m è¡¨ç¤ºè®¡ç®— 1.0 çš„ Double å€¼ã€‚

å…¶ä»–çš„å•ä½åˆ™åœ¨ä»¥ç±³ä½œä¸ºè®¡é‡å€¼çš„åŸºç¡€ä¸ŠåŠ ä»¥è½¬æ¢è¡¨ç¤ºã€‚ä¸€åƒç±³è¡¨ç¤º1000ç±³ï¼Œæ‰€ä»¥ km è®¡ç®—å±æ€§å°†å€¼ä¹˜ 1_000.00 ä»¥ç”¨ç±³æ¥è¡¨ç¤ºã€‚ç±»ä¼¼çš„ï¼Œä¸€ç±³æœ‰3.28084è‹±å°ºï¼Œæ‰€ä»¥ ft è®¡ç®—å±æ€§ç”¨ Double å€¼é™¤ä»¥3.28084ï¼Œå°†è‹±å°ºè½¬æ¢ä¸ºç±³ã€‚

ä¸Šè¿°å±æ€§ä¸ºåªè¯»è®¡ç®—å±æ€§ï¼Œä¸ºäº†ç®€æ´æ²¡æœ‰ä½¿ç”¨ get å…³é”®å­—ã€‚ä»–ä»¬éƒ½è¿”å› Double ç±»å‹çš„å€¼ï¼Œå¯ç”¨äºæ‰€æœ‰ä½¿ç”¨ Double å€¼çš„æ•°å­¦è®¡ç®—ä¸­ï¼š

```swift
let aMarathon = 42.km + 195.m
print("A marathon is \(aMarathon) meters long")
// Prints "A marathon is 42195.0 meters long"
```

> æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—å±æ€§ï¼Œä½†æ˜¯ä¸èƒ½æ·»åŠ å­˜å‚¨å±æ€§ï¼Œä¹Ÿä¸èƒ½å‘å·²æœ‰çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿè€…ã€‚

### 3 åˆå§‹åŒ–å™¨

æ‰©å±•å¯å‘å·²æœ‰çš„ç±»å‹æ·»åŠ æ–°çš„åˆå§‹åŒ–å™¨ã€‚è¿™å…è®¸ä½ æ‰©å±•å…¶ä»–ç±»å‹ä»¥ä½¿åˆå§‹åŒ–å™¨æ¥æ”¶ä½ çš„è‡ªå®šä¹‰ç±»å‹ä½œä¸ºå½¢å¼å‚æ•°ï¼Œæˆ–æä¾›è¯¥ç±»å‹çš„åŸå§‹å®ç°ä¸­æœªåŒ…å«çš„é¢å¤–åˆå§‹åŒ–é€‰é¡¹ã€‚

æ‰©å±•èƒ½ä¸ºç±»æ·»åŠ æ–°çš„**ä¾¿æ·åˆå§‹åŒ–å™¨**ï¼Œä½†æ˜¯ä¸èƒ½ä¸ºç±»æ·»åŠ **æŒ‡å®šåˆå§‹åŒ–å™¨æˆ–ååˆå§‹åŒ–å™¨**ã€‚æŒ‡å®šåˆå§‹åŒ–å™¨å’Œååˆå§‹åŒ–å™¨ å¿…é¡»ç”±åŸæ¥ç±»çš„å®ç°æä¾›ã€‚

> å¦‚æœä½ ä½¿ç”¨æ‰©å±•ä¸ºä¸€ä¸ªå€¼ç±»å‹æ·»åŠ åˆå§‹åŒ–å™¨ï¼Œä¸”è¯¥å€¼ç±»å‹ä¸ºå…¶æ‰€æœ‰å‚¨å­˜çš„å±æ€§æä¾›é»˜è®¤å€¼ï¼Œè€Œåˆä¸å®šä¹‰ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ—¶ï¼Œä½ å¯ä»¥åœ¨ä½ æ‰©å±•çš„åˆå§‹åŒ–å™¨ä¸­è°ƒç”¨è¯¥ç±»å‹é»˜è®¤çš„åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ Rect ç»“æ„ä½“ç”¨äºæè¿°å‡ ä½•çŸ©å½¢ã€‚è¿™ä¸ªä¾‹å­ä¹Ÿå®šä¹‰äº†ä¸¤ä¸ªè¾…åŠ©ç»“æ„ä½“ Size å’Œ Point ï¼ŒäºŒè€…çš„é»˜è®¤å€¼éƒ½æ˜¯ 0.0 ï¼š

```swift
struct Size {
    var width = 0.0, height = 0.0
}
struct Point {
    var x = 0.0, y = 0.0
}
struct Rect {
    var origin = Point()
    var size = Size()
}
```

å¦‚åŒé»˜è®¤åˆå§‹åŒ–å™¨ä¸­æè¿°çš„é‚£æ ·ï¼Œç”±äº Rect ç»“æ„ä½“ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå®ƒå°†è‡ªåŠ¨æ¥æ”¶ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨å’Œä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–å™¨ã€‚è¿™äº›åˆå§‹åŒ–å™¨èƒ½ç”¨äºåˆ›å»ºæ–°çš„ Rect å®ä¾‹ï¼š

```swift
let defaultRect = Rect()
let memberwiseRect = Rect(origin: Point(x: 2.0, y: 2.0),
                          size: Size(width: 5.0, height: 5.0))
```

ä½ å¯ä»¥æ‰©å±• Rect ç»“æ„ä½“ä»¥é¢å¤–æä¾›ä¸€ä¸ªæ¥æ”¶ç‰¹å®šåŸç‚¹å’Œå¤§å°çš„åˆå§‹åŒ–å™¨ï¼š

```swift
extension Rect {
    init(center: Point, size: Size) {
        let originX = center.x - (size.width / 2)
        let originY = center.y - (size.height / 2)
        self.init(origin: Point(x: originX, y: originY), size: size)
    }
}
```

è¿™ä¸ªåˆå§‹åŒ–å™¨é¦–å…ˆåŸºäºæä¾›çš„ center ç‚¹å’Œ size å€¼è®¡ç®—åˆé€‚çš„åŸç‚¹ã€‚ç„¶ååˆå§‹åŒ–å™¨è°ƒç”¨è¯¥ç»“æ„ä½“çš„è‡ªåŠ¨æˆå‘˜åˆå§‹åŒ–å™¨ `init(origin:size:) `ï¼Œè¿™æ ·å°±å°†æ–°çš„åŸç‚¹å’Œå¤§å°å€¼ä¿å­˜åœ¨äº†å¯¹åº”å±æ€§ä¸­ï¼š

```swift
let centerRect = Rect(center: Point(x: 4.0, y: 4.0),
                      size: Size(width: 3.0, height: 3.0))
// centerRect's origin is (2.5, 2.5) and its size is (3.0, 3.0)
```

> å¦‚æœä½ ä½¿ç”¨æ‰©å±•æä¾›äº†ä¸€ä¸ªæ–°çš„åˆå§‹åŒ–å™¨ï¼Œä½ ä»åº”ç¡®ä¿æ¯ä¸€ä¸ªå®ä¾‹éƒ½åœ¨åˆå§‹åŒ–å®Œæˆæ—¶å®Œå…¨åˆå§‹åŒ–ã€‚

### 4 æ–¹æ³•

æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰çš„ç±»å‹æ·»åŠ æ–°çš„å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ã€‚ä¸‹é¢çš„ä¾‹å­ä¸º Int ç±»å‹æ·»åŠ äº†ä¸€ä¸ªåä¸º repetitions çš„æ–°å®ä¾‹æ–¹æ³•ï¼š

```swift
extension Int {
    func repetitions(task: () -> Void) {
        for _ in 0..<self {
            task()
        }
    }
}
```

`repetitions(task:)` æ–¹æ³•æ¥æ”¶ä¸€ä¸ª `() -> Void` ç±»å‹çš„å•ä¸€å®é™…å‚æ•°ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰å‚æ•°ä¸”æ— è¿”å›å€¼çš„å‡½æ•°ã€‚

åœ¨è¿™ä¸ªæ‰©å±•å®šä¹‰ä¹‹åï¼Œä½ å¯ä»¥åœ¨ä»»ä½•æ•´å‹æ•°å­—å¤„è°ƒç”¨ `repetitions(task:)` æ–¹æ³•ï¼Œä»¥æ‰§è¡Œç›¸åº”æ¬¡æ•°çš„æ“ä½œï¼š

```swift
3.repetitions {
    print("Hello!")
}
// Hello!
// Hello!
// Hello!
```

#### 4.1 å¼‚å˜å®ä¾‹æ–¹æ³•

å¢åŠ äº†æ‰©å±•çš„å®ä¾‹æ–¹æ³•ä»å¯ä»¥ä¿®æ”¹ï¼ˆæˆ–å¼‚å˜ï¼‰å®ä¾‹æœ¬èº«ã€‚ç»“æ„ä½“å’Œæšä¸¾ç±»å‹æ–¹æ³•åœ¨ä¿®æ”¹ self æˆ–æœ¬èº«çš„å±æ€§æ—¶å¿…é¡»æ ‡è®°å®ä¾‹æ–¹æ³•ä¸º mutating ï¼Œå’ŒåŸæœ¬å®ç°çš„å¼‚å˜æ–¹æ³•ä¸€æ ·ã€‚

ä¸‹é¢çš„ä¾‹å­ä¸º Swift çš„ Int ç±»å‹æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å¼‚å˜æ–¹æ³• square ï¼Œä»¥è¡¨ç¤ºåŸå€¼çš„å¹³æ–¹ï¼š

```swift
extension Int {
    mutating func square() {
        self = self * self
    }
}
var someInt = 3
someInt.square()
// someInt is now 9
```

### 5 ä¸‹æ ‡

æ‰©å±•èƒ½ä¸ºå·²æœ‰çš„ç±»å‹æ·»åŠ æ–°çš„ä¸‹æ ‡ã€‚ä¸‹é¢çš„ä¾‹å­ä¸º Swift å†…å»ºçš„ Int ç±»å‹æ·»åŠ äº†ä¸€ä¸ªæ•´å‹ä¸‹æ ‡ã€‚è¿™ä¸ªä¸‹æ ‡ [n] è¿”å›äº†ä»å³å¼€å§‹ç¬¬ n ä½çš„åè¿›åˆ¶æ•°å­—ï¼š

* 123456789[0] è¿”å› 9
* 123456789[1] è¿”å› 8

â€¦â€¦ä»¥æ­¤ç±»æ¨ï¼š

```swift
extension Int {
    subscript(digitIndex: Int) -> Int {
        var decimalBase = 1
        for _ in 0..<digitIndex {
            decimalBase *= 10
        }
        return (self / decimalBase) % 10
    }
}
746381295[0]
// returns 5
746381295[1]
// returns 9
746381295[2]
// returns 2
746381295[8]
// returns 7
```

### 6 å†…åµŒç±»å‹

æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰çš„ç±»ã€ç»“æ„ä½“å’Œæšä¸¾ç±»å‹æ·»åŠ æ–°çš„å†…åµŒç±»å‹ï¼š

```swift
extension Int {
    enum Kind {
        case negative, zero, positive
    }
    var kind: Kind {
        switch self {
        case 0:
            return .zero
        case let x where x > 0:
            return .positive
        default:
            return .negative
        }
    }
}
```

è¿™ä¸ªä¾‹å­ä¸º Int æ·»åŠ äº†æ–°çš„å†…åµŒæšä¸¾ç±»å‹ã€‚è¿™ä¸ªåä¸º Kind çš„æšä¸¾ç±»å‹è¡¨ç¤ºä¸€ä¸ªç‰¹å®šæ•´æ•°çš„ç±»å‹ã€‚å…·ä½“è¡¨ç¤ºäº†è¿™ä¸ªæ•°å­—æ˜¯è´Ÿæ•°ã€é›¶è¿˜æ˜¯æ­£æ•°ã€‚

è¿™ä¸ªä¾‹è¿˜å‘ Int ä¸­æ·»åŠ äº†æ–°çš„è®¡ç®—å®ä¾‹å±æ€§ kind ï¼Œä»¥è¿”å›è¯¥æ•´æ•°çš„åˆé€‚ Kind æšä¸¾æƒ…å†µã€‚

è¿™ä¸ªå†…åµŒçš„æšä¸¾ç±»å‹å¯ä»¥å’Œä»»æ„ Int ä¸€èµ·ä½¿ç”¨ï¼š

```swift
func printIntegerKinds(_ numbers: [Int]) {
    for number in numbers {
        switch number.kind {
        case .negative:
            print("- ", terminator: "")
        case .zero:
            print("0 ", terminator: "")
        case .positive:
            print("+ ", terminator: "")
        }
    }
    print("")
}
printIntegerKinds([3, 19, -27, 0, -6, 0, 7])
// Prints "+ + - 0 - 0 + "
```

è¿™é‡Œ printIntegerKinds(_:) å‡½æ•°æ¥æ”¶ä¸€ä¸ª Int çš„æ•°ç»„å¹¶å¯¹è¿™äº›å€¼è¿›è¡Œéå†ã€‚å¯¹æ•°ç»„çš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œå‡½æ•°è€ƒè™‘è¿™ä¸ªæ•´æ•°çš„ kind è®¡ç®—å±æ€§ï¼Œå¹¶è¾“å‡ºåˆé€‚çš„æè¿°ã€‚

## åè®®

åè®®ä¸ºæ–¹æ³•ã€å±æ€§ã€ä»¥åŠå…¶ä»–ç‰¹å®šçš„ä»»åŠ¡éœ€æ±‚æˆ–åŠŸèƒ½å®šä¹‰è“å›¾ã€‚åè®®å¯è¢«ç±»ã€ç»“æ„ä½“ã€æˆ–æšä¸¾ç±»å‹é‡‡çº³ä»¥æä¾›æ‰€éœ€åŠŸèƒ½çš„å…·ä½“å®ç°ã€‚æ»¡è¶³äº†åè®®ä¸­éœ€æ±‚çš„ä»»æ„ç±»å‹éƒ½å«åšéµå¾ªäº†è¯¥åè®®ã€‚

é™¤äº†æŒ‡å®šéµå¾ªç±»å‹å¿…é¡»å®ç°çš„è¦æ±‚å¤–ï¼Œä½ å¯ä»¥æ‰©å±•ä¸€ä¸ªåè®®ä»¥å®ç°å…¶ä¸­çš„ä¸€äº›éœ€æ±‚æˆ–å®ç°ä¸€ä¸ªç¬¦åˆç±»å‹çš„å¯ä»¥åˆ©ç”¨çš„é™„åŠ åŠŸèƒ½ã€‚

### 1 åè®®çš„è¯­æ³•

å®šä¹‰åè®®çš„æ–¹å¼ä¸ç±»ã€ç»“æ„ä½“ã€æšä¸¾ç±»å‹éå¸¸ç›¸ä¼¼ï¼š

```swift
protocol SomeProtocol {
    // protocol definition goes here
}
```

åœ¨è‡ªå®šä¹‰ç±»å‹å£°æ˜æ—¶ï¼Œå°†åè®®åæ”¾åœ¨ç±»å‹åçš„å†’å·ä¹‹åæ¥è¡¨ç¤ºè¯¥ç±»å‹é‡‡çº³ä¸€ä¸ªç‰¹å®šçš„åè®®ã€‚å¤šä¸ªåè®®å¯ä»¥ç”¨é€—å·åˆ†å¼€åˆ—å‡ºï¼š

```swift
struct SomeStructure: FirstProtocol, AnotherProtocol {
    // structure definition goes here
}
```

è‹¥ä¸€ä¸ªç±»æ‹¥æœ‰çˆ¶ç±»ï¼Œå°†è¿™ä¸ªçˆ¶ç±»åæ”¾åœ¨å…¶é‡‡çº³çš„åè®®åä¹‹å‰ï¼Œå¹¶ç”¨é€—å·åˆ†éš”ï¼š

```swift
class SomeClass: SomeSuperclass, FirstProtocol, AnotherProtocol {
    // class definition goes here
}
```

### 2 å±æ€§è¦æ±‚

åè®®å¯ä»¥è¦æ±‚æ‰€æœ‰éµå¾ªè¯¥åè®®çš„ç±»å‹æä¾›ç‰¹å®šåå­—å’Œç±»å‹çš„å®ä¾‹å±æ€§æˆ–ç±»å‹å±æ€§ã€‚åè®®å¹¶ä¸ä¼šå…·ä½“è¯´æ˜å±æ€§æ˜¯å‚¨å­˜å‹å±æ€§è¿˜æ˜¯è®¡ç®—å‹å±æ€§â€”â€”å®ƒåªå…·ä½“è¦æ±‚å±æ€§æœ‰ç‰¹å®šçš„åç§°å’Œç±»å‹ã€‚åè®®åŒæ—¶è¦æ±‚ä¸€ä¸ªå±æ€§å¿…é¡»æ˜ç¡®æ˜¯`å¯è¯»çš„`æˆ–`å¯è¯»çš„å’Œå¯å†™çš„`ã€‚

è‹¥åè®®è¦æ±‚ä¸€ä¸ªå±æ€§ä¸ºå¯è¯»å’Œå¯å†™çš„ï¼Œé‚£ä¹ˆè¯¥å±æ€§è¦æ±‚ä¸èƒ½ç”¨å¸¸é‡å­˜å‚¨å±æ€§æˆ–åªè¯»è®¡ç®—å±æ€§æ¥æ»¡è¶³ã€‚è‹¥åè®®åªè¦æ±‚å±æ€§ä¸ºå¯è¯»çš„ï¼Œé‚£ä¹ˆä»»ä½•ç§ç±»çš„å±æ€§éƒ½èƒ½æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œè€Œä¸”å¦‚æœä½ çš„ä»£ç éœ€è¦çš„è¯ï¼Œè¯¥å±æ€§ä¹Ÿå¯ä»¥æ˜¯å¯å†™çš„ã€‚

å±æ€§è¦æ±‚å®šä¹‰ä¸ºå˜é‡å±æ€§ï¼Œåœ¨åç§°å‰é¢ä½¿ç”¨ var å…³é”®å­—ã€‚å¯è¯»å†™çš„å±æ€§ä½¿ç”¨ { get set } æ¥å†™åœ¨å£°æ˜åé¢æ¥æ˜ç¡®ï¼Œä½¿ç”¨ { get } æ¥æ˜ç¡®å¯è¯»çš„å±æ€§ã€‚

```swift 
protocol SomeProtocol {
    var mustBeSettable: Int { get set }
    var doesNotNeedToBeSettable: Int { get }
}
```

åœ¨åè®®ä¸­å®šä¹‰ç±»å‹å±æ€§æ—¶åœ¨å‰é¢æ·»åŠ  static å…³é”®å­—ã€‚å½“ç±»çš„å®ç°ä½¿ç”¨ class æˆ– static å…³é”®å­—å‰ç¼€å£°æ˜ç±»å‹å±æ€§è¦æ±‚æ—¶ï¼Œè¿™ä¸ªè§„åˆ™ä»ç„¶é€‚ç”¨ï¼š

```swift
protocol AnotherProtocol {
    static var someTypeProperty: Int { get set }
}
```

è¿™é‡Œæ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå®ä¾‹å±æ€§è¦æ±‚çš„åè®®ï¼š

```swift
protocol FullyNamed {
    var fullName: String { get }
}
```

ä¸Šé¢ FullyNamed åè®®è¦æ±‚éµå¾ªçš„ç±»å‹æä¾›ä¸€ä¸ªå®Œå…¨ç¬¦åˆçš„åå­—ã€‚è¿™ä¸ªåè®®å¹¶æœªæŒ‡å®šéµå¾ªç±»å‹çš„å…¶ä»–ä»»ä½•æ€§è´¨â€”â€”å®ƒåªè¦æ±‚è¿™ä¸ªå±æ€§å¿…é¡»ä¸ºå…¶è‡ªèº«æä¾›ä¸€ä¸ªå…¨åã€‚åè®®ç”³æ˜äº†æ‰€æœ‰ FullyNamed ç±»å‹å¿…é¡»æœ‰ä¸€ä¸ªå¯è¯»å®ä¾‹å±æ€§ fullName ï¼Œä¸”ä¸º String ç±»å‹ã€‚

è¿™é‡Œæ˜¯ä¸€ä¸ªé‡‡çº³å¹¶éµå¾ª FullyNamed åè®®çš„ç»“æ„ä½“çš„ä¾‹å­ï¼š

```swift
struct Person: FullyNamed {
    var fullName: String
}
var john = Person(fullName: "John Appleseed")
// john.fullName is "John Appleseed"
john.fullName = "John Bye!"
// john.fullName is "John Bye!"
```

è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º Person çš„ç»“æ„ä½“ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæœ‰åå­—çš„äººã€‚å®ƒåœ¨å…¶ç¬¬ä¸€è¡Œå®šä¹‰ä¸­è¡¨æ˜äº†å®ƒé‡‡çº³ FullyNamed åè®®ä½œä¸ºå®ƒè‡ªèº«çš„ä¸€éƒ¨åˆ†ã€‚

æ¯ä¸€ä¸ª Person çš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ªåä¸º fullName çš„ String ç±»å‹å‚¨å­˜å±æ€§ã€‚è¿™ç¬¦åˆäº† FullyNamed åè®®çš„å•ä¸€è¦æ±‚ï¼Œå¹¶ä¸”è¡¨ç¤º Person å·²ç»æ­£ç¡®åœ°éµå¾ªäº†è¯¥åè®®ã€‚ï¼ˆè‹¥åè®®çš„è¦æ±‚æ²¡æœ‰å®Œå…¨è¾¾æ ‡ï¼ŒSwift åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚ï¼‰

è¿™é‡Œæ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚çš„ç±»ï¼Œé‡‡çº³å¹¶éµå¾ªäº† FullyNamed åè®®ï¼š

```swift
class Starship: FullyNamed {
    var prefix: String?
    var name: String
    init(name: String, prefix: String? = nil) {
        self.name = name
        self.prefix = prefix
    }
    var fullName: String {
        return (prefix != nil ? prefix! + " " : "") + name
    }
}
var ncc1701 = Starship(name: "Enterprise", prefix: "USS")
// ncc1701.fullName is "USS Enterprise"
```

### 3 æ–¹æ³•è¦æ±‚

åè®®å¯ä»¥è¦æ±‚é‡‡çº³çš„ç±»å‹å®ç°æŒ‡å®šçš„å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œä¹¦å†™æ–¹å¼ä¸æ­£å¸¸å®ä¾‹å’Œç±»æ–¹æ³•çš„æ–¹å¼å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯ä¸éœ€è¦å¤§æ‹¬å·å’Œæ–¹æ³•çš„ä¸»ä½“ã€‚å…è®¸å˜é‡æ‹¥æœ‰å‚æ•°ï¼Œä¸æ­£å¸¸çš„æ–¹æ³•ä½¿ç”¨åŒæ ·çš„è§„åˆ™ã€‚ä½†åœ¨åè®®çš„å®šä¹‰ä¸­ï¼Œæ–¹æ³•å‚æ•°ä¸èƒ½å®šä¹‰é»˜è®¤å€¼ã€‚

æ­£å¦‚ç±»å‹å±æ€§è¦æ±‚çš„é‚£æ ·ï¼Œå½“åè®®ä¸­å®šä¹‰ç±»å‹æ–¹æ³•æ—¶ï¼Œä½ æ€»è¦åœ¨å…¶ä¹‹å‰æ·»åŠ  `static` å…³é”®å­—ã€‚å³ä½¿åœ¨ç±»å®ç°æ—¶ï¼Œç±»å‹æ–¹æ³•è¦æ±‚ä½¿ç”¨ `class` æˆ– `static` ä½œä¸ºå…³é”®å­—å‰ç¼€ï¼Œå‰é¢çš„è§„åˆ™ä»ç„¶é€‚ç”¨ï¼š

```swift
protocol SomeProtocol {
    static func someTypeMethod()
}
```

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå®ä¾‹æ–¹æ³•è¦æ±‚çš„åè®®ï¼š

```swift
protocol RandomNumberGenerator {
    func random() -> Double
}
```

è¿™é‡Œ RandomNumberGenerator åè®®è¦æ±‚æ‰€æœ‰é‡‡ç”¨è¯¥åè®®çš„ç±»å‹éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå®ä¾‹æ–¹æ³• random ï¼Œè€Œä¸”è¦è¿”å›ä¸€ä¸ª Double çš„å€¼ï¼Œæ— è®ºè¿™ä¸ªå€¼å«ä»€ä¹ˆã€‚å°½ç®¡åè®®æ²¡æœ‰æ˜ç¡®å®šä¹‰ï¼Œè¿™é‡Œé»˜è®¤è¿™ä¸ªå€¼åœ¨ 0.0  åˆ° 1.0 ï¼ˆä¸åŒ…æ‹¬ï¼‰ä¹‹é—´ã€‚

RandomNumberGenerator åè®®å¹¶ä¸ä¸ºéšæœºå€¼çš„ç”Ÿæˆè¿‡ç¨‹åšä»»ä½•å®šä¹‰ï¼Œå®ƒåªè¦æ±‚ç”Ÿæˆå™¨æä¾›ä¸€ä¸ªç”Ÿæˆéšæœºæ•°çš„æ ‡å‡†è¿‡ç¨‹ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªé‡‡ç”¨å¹¶éµå¾ª RandomNumberGenerator åè®®çš„ç±»çš„å®ç°ã€‚è¿™ä¸ªç±»å®ç°äº†è‘—åçš„ linear congruential generator ä¼ªéšæœºæ•°å‘ç”Ÿå™¨ç®—æ³•ï¼š

```swift
class LinearCongruentialGenerator: RandomNumberGenerator {
    var lastRandom = 42.0
    let m = 139968.0
    let a = 3877.0
    let c = 29573.0
    func random() -> Double {
        lastRandom = ((lastRandom * a + c).truncatingRemainder(dividingBy:m))
        return lastRandom / m
    }
}
let generator = LinearCongruentialGenerator()
print("Here's a random number: \(generator.random())")
// Prints "Here's a random number: 0.37464991998171"
print("And another one: \(generator.random())")
// Prints "And another one: 0.729023776863283"
```

### 4 å¼‚å˜æ–¹æ³•è¦æ±‚

æœ‰æ—¶ä¸€ä¸ªæ–¹æ³•éœ€è¦æ”¹å˜ï¼ˆæˆ–å¼‚å˜ï¼‰å…¶æ‰€å±çš„å®ä¾‹ã€‚ä¾‹å¦‚å€¼ç±»å‹çš„å®ä¾‹æ–¹æ³•ï¼ˆå³ç»“æ„ä½“æˆ–æšä¸¾ï¼‰ï¼Œåœ¨æ–¹æ³•çš„ `func` å…³é”®å­—ä¹‹å‰ä½¿ç”¨ `mutating` å…³é”®å­—ï¼Œæ¥è¡¨ç¤ºåœ¨è¯¥æ–¹æ³•å¯ä»¥æ”¹å˜å…¶æ‰€å±çš„å®ä¾‹ï¼Œä»¥åŠè¯¥å®ä¾‹çš„æ‰€æœ‰å±æ€§ã€‚è¿™ä¸€è¿‡ç¨‹å†™åœ¨äº†[åœ¨å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»å‹](#change_value)ä¸­ã€‚

è‹¥ä½ å®šä¹‰äº†ä¸€ä¸ªåè®®çš„å®ä¾‹æ–¹æ³•éœ€æ±‚ï¼Œæƒ³è¦å¼‚å˜ä»»ä½•é‡‡ç”¨äº†è¯¥åè®®çš„ç±»å‹å®ä¾‹ï¼Œåªéœ€åœ¨åè®®é‡Œæ–¹æ³•çš„å®šä¹‰å½“ä¸­ä½¿ç”¨ `mutating` å…³é”®å­—ã€‚è¿™å…è®¸ç»“æ„ä½“å’Œæšä¸¾ç±»å‹èƒ½é‡‡ç”¨ç›¸åº”åè®®å¹¶æ»¡è¶³æ–¹æ³•è¦æ±‚ã€‚

> å¦‚æœä½ åœ¨åè®®ä¸­æ ‡è®°å®ä¾‹æ–¹æ³•éœ€æ±‚ä¸º `mutating` ï¼Œåœ¨ä¸ºç±»å®ç°è¯¥æ–¹æ³•çš„æ—¶å€™ä¸éœ€è¦å†™ `mutating` å…³é”®å­—ã€‚ `mutating` å…³é”®å­—åªåœ¨ç»“æ„ä½“å’Œæšä¸¾ç±»å‹ä¸­éœ€è¦ä¹¦å†™ã€‚

åœ¨Togglableåè®®çš„å®šä¹‰ä¸­ï¼Œ toggle() æ–¹æ³•ä½¿ç”¨ mutating å…³é”®å­—æ ‡è®°ï¼Œæ¥è¡¨æ˜è¯¥æ–¹æ³•åœ¨è°ƒç”¨æ—¶ä¼šæ”¹å˜éµå¾ªè¯¥åè®®çš„å®ä¾‹çš„çŠ¶æ€ï¼š

```swift
protocol Togglable {
    mutating func toggle()
}
```

è‹¥ä½¿ç”¨ç»“æ„ä½“æˆ–æšä¸¾å®ç° Togglable åè®®ï¼Œè¿™ä¸ªç»“æ„ä½“æˆ–æšä¸¾å¯ä»¥é€šè¿‡ä½¿ç”¨ mutating æ ‡è®°è¿™ä¸ª toggle() æ–¹æ³•ï¼Œæ¥ä¿è¯è¯¥å®ç°ç¬¦åˆåè®®è¦æ±‚ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º OnOffSwitch çš„æšä¸¾ã€‚è¿™ä¸ªæšä¸¾åœ¨ä¸¤ç§çŠ¶æ€é—´æ”¹å˜ï¼Œå³æšä¸¾æˆå‘˜ On å’Œ Off ã€‚è¯¥æšä¸¾çš„ toggle å®ç°ä½¿ç”¨äº† mutating å…³é”®å­—ï¼Œä»¥æ»¡è¶³ Togglable åè®®éœ€æ±‚ï¼š

```swift
enum OnOffSwitch: Togglable {
    case off, on
    mutating func toggle() {
        switch self {
        case .off:
            self = .on
        case .on:
            self = .off
        }
    }
}
var lightSwitch = OnOffSwitch.off
lightSwitch.toggle()
// lightSwitch is now equal to .on
```

### 5 åˆå§‹åŒ–å™¨è¦æ±‚	

åè®®å¯ä»¥è¦æ±‚éµå¾ªåè®®çš„ç±»å‹å®ç°æŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€‚å’Œä¸€èˆ¬çš„åˆå§‹åŒ–å™¨ä¸€æ ·ï¼Œåªç”¨å°†åˆå§‹åŒ–å™¨å†™åœ¨åè®®çš„å®šä¹‰å½“ä¸­ï¼Œåªæ˜¯ä¸ç”¨å†™å¤§æ‹¬å·ä¹Ÿå°±æ˜¯åˆå§‹åŒ–å™¨çš„å®ä½“ï¼š

```swift
protocol SomeProtocol {
    init(someParameter: Int)
}
```

#### 5.1 åè®®åˆå§‹åŒ–å™¨è¦æ±‚çš„ç±»å®ç°

ä½ å¯ä»¥é€šè¿‡å®ç°æŒ‡å®šåˆå§‹åŒ–å™¨æˆ–ä¾¿æ·åˆå§‹åŒ–å™¨æ¥ä½¿éµå¾ªè¯¥åè®®çš„ç±»æ»¡è¶³åè®®çš„åˆå§‹åŒ–å™¨è¦æ±‚ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½å¿…é¡»ä½¿ç”¨ `required` å…³é”®å­—ä¿®é¥°åˆå§‹åŒ–å™¨çš„å®ç°ï¼š

```swift
class SomeClass: SomeProtocol {
    required init(someParameter: Int) {
        // initializer implementation goes here
    }
}
```

åœ¨éµå¾ªåè®®çš„ç±»çš„æ‰€æœ‰å­ç±»ä¸­ï¼Œ `required` ä¿®é¥°çš„ä½¿ç”¨ä¿è¯äº†ä½ ä¸ºåè®®åˆå§‹åŒ–å™¨è¦æ±‚æä¾›äº†ä¸€ä¸ªæ˜ç¡®çš„ç»§æ‰¿å®ç°ã€‚

> ç”±äº `final` çš„ç±»ä¸ä¼šæœ‰å­ç±»ï¼Œå¦‚æœåè®®åˆå§‹åŒ–å™¨å®ç°çš„ç±»ä½¿ç”¨äº† `final` æ ‡è®°ï¼Œä½ å°±ä¸éœ€è¦ä½¿ç”¨ `required` æ¥ä¿®é¥°äº†ã€‚å› ä¸ºè¿™æ ·çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿å­ç±»ã€‚è¯¦è§é˜»æ­¢é‡å†™äº†è§£æ›´å¤š final ä¿®é¥°ç¬¦çš„ä¿¡æ¯ã€‚

å¦‚æœä¸€ä¸ªå­ç±»é‡å†™äº†çˆ¶ç±»æŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸”éµå¾ªåè®®å®ç°äº†åˆå§‹åŒ–å™¨è¦æ±‚ï¼Œé‚£ä¹ˆå°±è¦ä¸ºè¿™ä¸ªåˆå§‹åŒ–å™¨çš„å®ç°æ·»åŠ  `required` å’Œ `override` ä¸¤ä¸ªä¿®é¥°ç¬¦ï¼š

```swift
protocol SomeProtocol {
    init()
}
 
class SomeSuperClass {
    init() {
        // initializer implementation goes here
    }
}
 
class SomeSubClass: SomeSuperClass, SomeProtocol {
    // "required" from SomeProtocol conformance; "override" from SomeSuperClass
    required override init() {
        // initializer implementation goes here
    }
}
```

#### 5.2 å¯å¤±è´¥åˆå§‹åŒ–å™¨è¦æ±‚

å¦‚åŒå¯å¤±è´¥åˆå§‹åŒ–å™¨å®šä¹‰çš„ä¸€æ ·ï¼Œåè®®å¯ä»¥ä¸ºéµå¾ªè¯¥åè®®çš„ç±»å‹å®šä¹‰å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚

éµå¾ªåè®®çš„ç±»å‹å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯å¤±è´¥çš„æˆ–ä¸å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨æ»¡è¶³ä¸€ä¸ªå¯å¤±è´¥çš„åˆå§‹åŒ–å™¨è¦æ±‚ã€‚ä¸å¯å¤±è´¥åˆå§‹åŒ–å™¨è¦æ±‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸å¯å¤±è´¥åˆå§‹åŒ–å™¨æˆ–éšå¼å±•å¼€çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨æ»¡è¶³ã€‚

### 6 å°†åè®®ä½œä¸ºç±»å‹

å®é™…ä¸Šåè®®è‡ªèº«å¹¶ä¸å®ç°åŠŸèƒ½ã€‚ä¸è¿‡ä½ åˆ›å»ºçš„ä»»æ„åè®®éƒ½å¯ä»¥å˜ä¸ºä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„ç±»å‹åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚

ç”±äºå®ƒæ˜¯ä¸€ä¸ªç±»å‹ï¼Œä½ å¯ä»¥åœ¨å¾ˆå¤šå…¶ä»–ç±»å‹å¯ä»¥ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨åè®®ï¼ŒåŒ…æ‹¬ï¼š

* åœ¨å‡½æ•°ã€æ–¹æ³•æˆ–è€…åˆå§‹åŒ–å™¨é‡Œä½œä¸ºå½¢å¼å‚æ•°ç±»å‹æˆ–è€…è¿”å›ç±»å‹ï¼›
* ä½œä¸ºå¸¸é‡ã€å˜é‡æˆ–è€…å±æ€§çš„ç±»å‹ï¼›
* ä½œä¸ºæ•°ç»„ã€å­—å…¸æˆ–è€…å…¶ä»–å­˜å‚¨å™¨çš„å…ƒç´ çš„ç±»å‹ã€‚

> ç”±äºåè®®æ˜¯ç±»å‹ï¼Œè¦å¼€å¤´å¤§å†™ï¼ˆæ¯”å¦‚è¯´ FullyNamed å’Œ RandomNumberGenerator ï¼‰æ¥åŒ¹é… Swift é‡Œå…¶ä»–ç±»å‹åç§°æ ¼å¼ï¼ˆæ¯”å¦‚è¯´ Int ã€ String è¿˜æœ‰ Double ï¼‰ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªæŠŠåè®®ç”¨ä½œç±»å‹çš„ä¾‹å­ï¼š

```swift
class Dice {
    let sides: Int
    let generator: RandomNumberGenerator
    init(sides: Int, generator: RandomNumberGenerator) {
        self.sides = sides
        self.generator = generator
    }
    func roll() -> Int {
        return Int(generator.random() * Double(sides)) + 1
    }
}
```

è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå«åš Dice çš„æ–°ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç”¨äºæ£‹ç›˜æ¸¸æˆçš„ n é¢éª°å­ã€‚ Dice å®ä¾‹æœ‰ä¸€ä¸ªå«åš sides çš„æ•´æ•°å±æ€§ï¼Œå®ƒè¡¨ç¤ºäº†éª°å­æœ‰å¤šå°‘ä¸ªé¢ï¼Œè¿˜æœ‰ä¸ªå«åš generator çš„å±æ€§ï¼Œå®ƒæä¾›äº†éšæœºæ•°çš„ç”Ÿæˆå™¨æ¥ç”Ÿæˆéª°å­çš„å€¼ã€‚

generator å±æ€§æ˜¯ RandomNumberGenerator ç±»å‹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åˆ°ä»»ä½•é‡‡çº³äº† RandomNumberGenerator åè®®çš„ç±»å‹çš„å®ä¾‹é‡Œã€‚é™¤äº†è¿™ä¸ªå®ä¾‹å¿…é¡»é‡‡çº³ RandomNumberGenerator åè®®ä»¥å¤–ï¼Œæ²¡æœ‰å…¶ä»–ä»»ä½•è¦æ±‚äº†ã€‚

Dice ä¹Ÿæœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œæ¥è®¾ç½®åˆå§‹çŠ¶æ€ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨æœ‰ä¸€ä¸ªå½¢å¼å‚æ•°å«åš generator ï¼Œå®ƒåŒæ ·ä¹Ÿæ˜¯ RandomNumberGenerator ç±»å‹ã€‚ä½ å¯ä»¥åœ¨åˆå§‹åŒ–æ–°çš„ Dice å®ä¾‹çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªä»»æ„éµå¾ªè¿™ä¸ªåè®®çš„ç±»å‹çš„å€¼åˆ°è¿™ä¸ªå½¢å¼å‚æ•°é‡Œã€‚

Dice æä¾›äº†ä¸€ä¸ªå½¢å¼å‚æ•°æ–¹æ³•ï¼Œ roll ï¼Œå®ƒè¿”å›ä¸€ä¸ªä»‹äº 1 å’Œéª°å­é¢æ•°ä¹‹é—´çš„æ•´æ•°å€¼ã€‚è¿™ä¸ªæ–¹æ³•è°ƒç”¨ç”Ÿæˆå™¨çš„ random() æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä»‹äº 0.0 å’Œ 1.0 ä¹‹é—´çš„éšæœºæ•°ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªéšæœºæ•°æ¥åœ¨æ­£ç¡®çš„èŒƒå›´åˆ›å»ºä¸€ä¸ªéª°å­çš„å€¼ã€‚ç”±äº generator å·²çŸ¥é‡‡çº³äº† RandomNumberGenerator ï¼Œå®ƒä¿è¯äº†ä¼šæœ‰ random() æ–¹æ³•ä»¥ä¾›è°ƒç”¨ã€‚

è¿™é‡Œæ˜¯ Dice ç±»ä½¿ç”¨ LinearCongurentialGenerator å®ä¾‹ä½œä¸ºç”¨äºåˆ›å»ºä¸€ä¸ªå…­é¢éª°å­çš„éšæœºæ•°ç”Ÿæˆå™¨æ¥åˆ›å»ºä¸€ä¸ªå…­é¢éª°å­çš„è¿‡ç¨‹ï¼š

```swift
var d6 = Dice(sides: 6, generator: LinearCongruentialGenerator())
for _ in 1...5 {
    print("Random dice roll is \(d6.roll())")
}
// Random dice roll is 3
// Random dice roll is 5
// Random dice roll is 4
// Random dice roll is 5
// Random dice roll is 4
```

### 7 å§”æ‰˜

å§”æ‰˜æ˜¯ä¸€ä¸ªå…è®¸ç±»æˆ–è€…ç»“æ„ä½“æ”¾æ‰‹ï¼ˆæˆ–è€…è¯´å§”æ‰˜ï¼‰å®ƒä»¬è‡ªèº«çš„æŸäº›è´£ä»»ç»™å¦å¤–ç±»å‹å®ä¾‹çš„è®¾è®¡æ¨¡å¼ã€‚è¿™ä¸ªè®¾è®¡æ¨¡å¼é€šè¿‡å®šä¹‰ä¸€ä¸ªå°è£…äº†å§”æ‰˜è´£ä»»çš„åè®®æ¥å®ç°ï¼Œæ¯”å¦‚éµå¾ªäº†åè®®çš„ç±»å‹ï¼ˆæ‰€è°“çš„å§”æ‰˜ï¼‰æ¥ä¿è¯æä¾›è¢«å§”æ‰˜çš„åŠŸèƒ½ã€‚å§”æ‰˜å¯ä»¥ç”¨æ¥å“åº”ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºï¼Œæˆ–è€…ä»å¤–éƒ¨èµ„æºå–å›æ•°æ®è€Œä¸éœ€è¦äº†è§£èµ„æºå…·ä½“çš„ç±»å‹ã€‚

ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªåè®®ä»¥ç”¨äºåŸºäºéª°å­çš„æ£‹ç›˜æ¸¸æˆï¼š

```swift
protocol DiceGame {
    var dice: Dice { get }
    func play()
}
protocol DiceGameDelegate {
    func gameDidStart(_ game: DiceGame)
    func game(_ game: DiceGame, didStartNewTurnWithDiceRoll diceRoll: Int)
    func gameDidEnd(_ game: DiceGame)
}
```

DiceGame åè®®æ˜¯ä¸€ä¸ªç»™ä»»ä½•ä¸éª°å­æœ‰å…³çš„æ¸¸æˆé‡‡çº³çš„åè®®ã€‚ DiceGameDelegate åè®®å¯ä»¥è¢«ä»»ä½•è¿½è¸ª DiceGame è¿›åº¦çš„ç±»å‹é‡‡çº³ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªåŸæœ¬åœ¨æ§åˆ¶æµä¸­ä»‹ç»çš„è›‡ä¸æ¢¯å­æ¸¸æˆçš„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬é‡‡çº³äº†åè®®ä»¥ä½¿ç”¨ Dice å®ä¾‹æ¥è®©å®ƒä½¿ç”¨éª°å­ï¼›é‡‡ç”¨ DiceGame åè®®ï¼›ç„¶åé€šçŸ¥ä¸€ä¸ª DiceGameDelegate å…³äºè¿›åº¦çš„ä¿¡æ¯ï¼š

```swift
class SnakesAndLadders: DiceGame {
    let finalSquare = 25
    let dice = Dice(sides: 6, generator: LinearCongruentialGenerator())
    var square = 0
    var board: [Int]
    init() {
        board = Array(repeating: 0, count: finalSquare + 1)
        board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02
        board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08
    }
    var delegate: DiceGameDelegate?
    func play() {
        square = 0
        delegate?.gameDidStart(self)
        gameLoop: while square != finalSquare {
            let diceRoll = dice.roll()
            delegate?.game(self, didStartNewTurnWithDiceRoll: diceRoll)
            switch square + diceRoll {
            case finalSquare:
                break gameLoop
            case let newSquare where newSquare > finalSquare:
                continue gameLoop
            default:
                square += diceRoll
                square += board[square]
            }
        }
        delegate?.gameDidEnd(self)
    }
}
```

è¿™ä¸ªç‰ˆæœ¬çš„æ¸¸æˆä½¿ç”¨äº†å«åš SnakesAndLadders ç±»åŒ…è£…ï¼Œå®ƒé‡‡çº³äº† DiceGame åè®®ã€‚å®ƒæä¾›äº†å¯è¯»çš„ dice å±æ€§å’Œä¸€ä¸ª play() æ–¹æ³•æ¥éµå¾ªåè®®ã€‚ï¼ˆ dice å±æ€§å£°æ˜ä¸ºå¸¸é‡å±æ€§æ˜¯å› ä¸ºå®ƒä¸éœ€è¦åœ¨åˆå§‹åŒ–åå†æ”¹å˜äº†ï¼Œè€Œä¸”åè®®åªéœ€è¦å®ƒæ˜¯å¯è¯»çš„ã€‚ï¼‰

è›‡ä¸æ¢¯å­æ¸¸æˆæ£‹ç›˜è®¾ç½®éƒ½å†™åœ¨äº†ç±»çš„ init() åˆå§‹åŒ–å™¨ä¸­ã€‚æ‰€æœ‰çš„æ¸¸æˆé€»è¾‘éƒ½ç§»åŠ¨åˆ°äº†åè®®çš„ play æ–¹æ³•é‡Œï¼Œå®ƒä½¿ç”¨äº†åè®®è¦æ±‚çš„ dice å±æ€§æ¥æä¾›å®ƒçš„éª°å­å€¼ã€‚

æ³¨æ„ delegate å±æ€§è¢«å®šä¹‰ä¸ºå¯é€‰çš„ DiceGameDelegate ï¼Œæ˜¯å› ä¸ºç©æ¸¸æˆå¹¶ä¸æ˜¯å¿…é¡»è¦æœ‰å§”æ‰˜ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ï¼Œ delegate å±æ€§è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º nil ã€‚æ­¤åï¼Œæ¸¸æˆçš„å®ä¾‹åŒ–è€…å¯ä»¥é€‰æ‹©ç»™å±æ€§èµ‹å€¼ä¸€ä¸ªåˆé€‚çš„å§”æ‰˜ã€‚

DiceGameDelegate æä¾›äº†ä¸‰ä¸ªè¿½è¸ªæ¸¸æˆè¿›åº¦çš„æ–¹æ³•ã€‚è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨æ¸¸æˆé€»è¾‘çš„ play() æ–¹æ³•ä¸­åä½œï¼Œå¹¶ä¸”åœ¨æ¸¸æˆå¼€å§‹æ—¶è°ƒç”¨ï¼Œæ–°ä¸€å±€å¼€å§‹ï¼Œæˆ–è€…æ¸¸æˆç»“æŸã€‚

ç”±äº delegate å±æ€§æ˜¯å¯é€‰çš„ DiceGameDelegate ï¼Œ play() æ–¹æ³•åœ¨æ¯æ¬¡è°ƒç”¨å§”æ‰˜çš„æ—¶å€™éƒ½ä½¿ç”¨å¯é€‰é“¾ã€‚å¦‚æœ delegate å±æ€§æ˜¯ç©ºçš„ï¼Œè¿™äº›å§”æ‰˜è°ƒç”¨ä¼šä¼˜é›…åœ°å¤±è´¥å¹¶ä¸”æ²¡æœ‰é”™è¯¯ã€‚å¦‚æœ delegate å±æ€§éç©ºï¼Œå§”æ‰˜çš„æ–¹æ³•å°±è¢«è°ƒç”¨äº†ï¼Œå¹¶ä¸”æŠŠ SnakesAndLadders å®ä¾‹ä½œä¸ºå½¢å¼å‚æ•°ä¼ å…¥ã€‚

æ¥ä¸‹æ¥çš„ä¾‹å­å±•ç¤ºäº†å«åš DiceGameTracker çš„ç±»ï¼Œå®ƒæ¬¡é‚£äº† DiceGameDelegate åè®®ï¼š

```swift
class DiceGameTracker: DiceGameDelegate {
    var numberOfTurns = 0
    func gameDidStart(_ game: DiceGame) {
        numberOfTurns = 0
        if game is SnakesAndLadders {
            print("Started a new game of Snakes and Ladders")
        }
        print("The game is using a \(game.dice.sides)-sided dice")
    }
    func game(_ game: DiceGame, didStartNewTurnWithDiceRoll diceRoll: Int) {
        numberOfTurns += 1
        print("Rolled a \(diceRoll)")
    }
    func gameDidEnd(_ game: DiceGame) {
        print("The game lasted for \(numberOfTurns) turns")
    }
}
```

DiceGameTracker å®ç°äº† DiceGameDelegate è¦æ±‚çš„æ‰€æœ‰æ–¹æ³•ã€‚å®ƒä½¿ç”¨è¿™äº›æ–¹æ³•æ¥å¯¹æ¸¸æˆå¼€äº†å¤šå°‘å±€ä¿æŒè¿½è¸ªã€‚å®ƒåœ¨æ¸¸æˆå¼€å§‹çš„æ—¶å€™é‡ç½® numberOfTurns å±æ€§ä¸ºé›¶ï¼Œåœ¨æ¯æ¬¡æ–°ä¸€è½®æ¸¸æˆå¼€å§‹çš„æ—¶å€™å¢åŠ ï¼Œå¹¶ä¸”ä¸€æ—¦æ¸¸æˆç»“æŸï¼Œæ‰“å°å‡ºæ¸¸æˆä¸€å…±å¼€äº†å¤šå°‘è½®ã€‚

ä¸Šè¾¹å±•ç¤ºçš„ `gameDidStart(_:) `çš„å®ç°ä½¿ç”¨äº† game å½¢å¼å‚æ•°æ¥æ‰“å°æŸäº›å…³äºæ¸¸æˆçš„ä¿¡æ¯ã€‚ game å½¢å¼å‚æ•°æ˜¯ DiceGame ç±»å‹ï¼Œä¸æ˜¯ SnakesAndLadders ï¼Œæ‰€ä»¥ `gameDidStart(_:)` åªèƒ½è®¿é—®å’Œä½¿ç”¨ DiceGame åè®®å®ç°çš„é‚£éƒ¨åˆ†æ–¹æ³•å’Œå±æ€§ã€‚æ€»ä¹‹ï¼Œè½¬æ¢ç±»å‹ä¹‹åæ–¹æ³•è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒæ£€æŸ¥ game åœ¨åå°æ˜¯å¦å°±æ˜¯ SnakesAndLadders å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œæ‰“å°åˆé€‚çš„ä¿¡æ¯ã€‚

`gameDidStart(_:)` æ–¹æ³•åŒæ ·è®¿é—®ä¼ å…¥çš„ game å½¢å¼å‚æ•°é‡Œçš„ dice å±æ€§ã€‚ç”±äº game å·²ç»éµå¾ª DiceGame åè®®ï¼Œè¿™å°±ä¿è¯äº†diceå±æ€§çš„å­˜åœ¨ï¼Œå¹¶ä¸” `gameDidStart(_:)`æ–¹æ³•èƒ½å¤Ÿè®¿é—®å’Œæ‰“å°éª°å­çš„ sides å±æ€§ï¼Œæ— è®ºç©çš„æ˜¯ä»€ä¹ˆç±»å‹çš„æ¸¸æˆã€‚

è¿™é‡Œæ˜¯ DiceGameTracker çš„è¿è¡Œç»“æœï¼š

```swift
let tracker = DiceGameTracker()
let game = SnakesAndLadders()
game.delegate = tracker
game.play()
// Started a new game of Snakes and Ladders
// The game is using a 6-sided dice
// Rolled a 3
// Rolled a 5
// Rolled a 4
// Rolled a 5
// The game lasted for 4 turns
```

### 8 åœ¨æ‰©å±•é‡Œæ·»åŠ åè®®éµå¾ª
#### 8.1 ä½¿ç”¨æ‰©å±•å£°æ˜é‡‡çº³åè®®
### 9 åè®®ç±»å‹çš„é›†åˆ
### 10 åè®®ç»§æ‰¿
### 11 ç±»ä¸“ç”¨çš„åè®®
### 12 åè®®ç»„åˆ
### 13 åè®®éµå¾ªçš„æ£€æŸ¥
### 14 å¯é€‰åè®®è¦æ±‚
### 15 åè®®æ‰©å±•
#### 15.1 æä¾›é»˜è®¤å®ç°
#### 15.2 ç»™åè®®æ‰©å±•æ·»åŠ é™åˆ¶


## æ³›å‹
## å†…å­˜å®‰å…¨æ€§
## è®¿é—®æ§åˆ¶

`è®¿é—®æ§åˆ¶`é™åˆ¶å…¶ä»–æºæ–‡ä»¶å’Œæ¨¡å—å¯¹ä½ çš„ä»£ç çš„è®¿é—®ã€‚è¿™ä¸ªç‰¹æ€§å…è®¸ä½ éšè—ä»£ç çš„å®ç°ç»†èŠ‚ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªåå¥½çš„æ¥å£è®©å…¶ä»–ä»£ç å¯ä»¥è®¿é—®å’Œä½¿ç”¨ã€‚

ä½ å¯ä»¥ç»™ç‰¹å®šçš„å•ä¸ªç±»å‹ (ç±»ï¼Œç»“æ„ä½“å’Œæšä¸¾)è®¾ç½®è®¿é—®çº§åˆ«ï¼Œæ¯”å¦‚è¯´å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–å™¨ä»¥åŠå±äºé‚£äº›ç±»å‹çš„ä¸‹æ ‡ã€‚åè®®å¯ä»¥é™åˆ¶åœ¨ä¸€å®šçš„èŒƒå›´å†…ä½¿ç”¨ï¼Œå°±åƒå…¨å±€å¸¸é‡ï¼Œå˜é‡ï¼Œå‡½æ•°é‚£æ ·ã€‚

é™¤äº†æä¾›å„ç§çº§åˆ«çš„è®¿é—®æ§åˆ¶ï¼ŒSwift ä¸ºå…¸å‹åœºæ™¯æä¾›é»˜è®¤çš„è®¿é—®çº§åˆ«ï¼Œå‡å°‘äº†æ˜¾å¼æŒ‡å®šè®¿é—®æ§åˆ¶çº§åˆ«çš„éœ€æ±‚ã€‚ äº‹å®ä¸Šï¼Œå¦‚æœä½ ç¼–å†™å•ç›®æ ‡åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½æ ¹æœ¬ä¸éœ€è¦æ˜¾å¼æŒ‡å®šè®¿é—®æ§åˆ¶çº§åˆ«ã€‚

### 1. æ¨¡å—å’Œæºæ–‡ä»¶

Swift çš„è®¿é—®æ§åˆ¶æ¨¡å‹åŸºäºæ¨¡å—å’Œæºæ–‡ä»¶çš„æ¦‚å¿µã€‚

`æ¨¡å—æ˜¯å•ä¸€çš„ä»£ç åˆ†é…å•å…ƒâ€”â€”ä¸€ä¸ªæ¡†æ¶æˆ–åº”ç”¨ç¨‹åºä¼šä½œä¸ºçš„ç‹¬ç«‹çš„å•å…ƒæ„å»ºå’Œå‘å¸ƒå¹¶ä¸”å¯ä»¥ä½¿ç”¨ Swift çš„ import å…³é”®å­—å¯¼å…¥åˆ°å¦ä¸€ä¸ªæ¨¡å—ã€‚`

Xcode ä¸­çš„æ¯ä¸ªæ„å»ºç›®æ ‡ï¼ˆä¾‹å¦‚åº”ç”¨ç¨‹åºåŒ…æˆ–æ¡†æ¶ï¼‰åœ¨ Swift ä¸­è¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ã€‚ å¦‚æœä½ å°†åº”ç”¨ç¨‹åºçš„ä»£ç ä½œä¸ºç‹¬ç«‹çš„æ¡†æ¶ç»„åˆåœ¨ä¸€èµ·â€”â€”æˆ–è®¸å¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºä¸­å°è£…å’Œé‡ç”¨è¯¥ä»£ç â€”â€”é‚£ä¹ˆå½“åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­å¯¼å…¥å’Œä½¿ç”¨æ—¶ï¼Œåœ¨è¯¥æ¡†æ¶ä¸­å®šä¹‰çš„æ‰€æœ‰å†…å®¹éƒ½å°†ä½œä¸ºç‹¬ç«‹æ¨¡å—çš„ä¸€éƒ¨åˆ† ï¼Œæˆ–æ˜¯å½“å®ƒåœ¨å¦ä¸€ä¸ªæ¡†æ¶ä¸­ä½¿ç”¨æ—¶ã€‚

`æºæ–‡ä»¶æ˜¯ä¸€ä¸ªæ¨¡å—ä¸­çš„å•ä¸ª Swift æºä»£ç æ–‡ä»¶ï¼ˆå®é™…ä¸Šï¼Œæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–æ˜¯æ¡†æ¶ä¸­çš„å•ä¸ªæ–‡ä»¶ï¼‰ã€‚`è™½ç„¶é€šå¸¸åœ¨å•ç‹¬æºæ–‡ä»¶ä¸­å®šä¹‰å•ä¸ªç±»å‹ï¼Œä½†æ˜¯ä¸€ä¸ªæºæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹ã€‚å‡½æ•°ç­‰çš„å®šä¹‰ã€‚

### 2. è®¿é—®çº§åˆ«

Swift ä¸ºä»£ç çš„å®ä½“æä¾›ä¸ªäº”ä¸ªä¸åŒçš„è®¿é—®çº§åˆ«ã€‚è¿™äº›è®¿é—®çº§åˆ«å’Œå®šä¹‰å®ä½“çš„æºæ–‡ä»¶ç›¸å…³ï¼Œå¹¶ä¸”ä¹Ÿå’Œæºæ–‡ä»¶æ‰€å±çš„æ¨¡å—ç›¸å…³ã€‚

> Open è®¿é—® å’Œ public è®¿é—® å…è®¸å®ä½“è¢«å®šä¹‰æ¨¡å—ä¸­çš„ä»»æ„æºæ–‡ä»¶è®¿é—®ï¼ŒåŒæ ·å¯ä»¥è¢«å¦ä¸€æ¨¡å—çš„æºæ–‡ä»¶é€šè¿‡å¯¼å…¥è¯¥å®šä¹‰æ¨¡å—æ¥è®¿é—®ã€‚åœ¨æŒ‡å®šæ¡†æ¶çš„å…¬å…±æ¥å£æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ open æˆ– public è®¿é—®ã€‚ open è®¿é—®ä»…é€‚ç”¨äºç±»å’Œç±»æˆå‘˜ï¼Œå®ƒä¸ public è®¿é—®åŒºåˆ«å¦‚ä¸‹ï¼š
> 
> > public è®¿é—®ï¼Œæˆ–ä»»ä½•æ›´ä¸¥æ ¼çš„è®¿é—®çº§åˆ«çš„ç±»ï¼Œåªèƒ½åœ¨å…¶å®šä¹‰æ¨¡å—ä¸­è¢«ç»§æ‰¿ã€‚
> > 
> > public è®¿é—®ï¼Œæˆ–ä»»ä½•æ›´ä¸¥æ ¼è®¿é—®çº§åˆ«çš„ç±»æˆå‘˜ï¼Œåªèƒ½è¢«å…¶å®šä¹‰æ¨¡å—çš„å­ç±»é‡å†™ã€‚
> > 
> > open ç±»å¯ä»¥åœ¨å…¶å®šä¹‰æ¨¡å—ä¸­è¢«ç»§æ‰¿ï¼Œä¹Ÿå¯åœ¨ä»»ä½•å¯¼å…¥å®šä¹‰æ¨¡å—çš„å…¶ä»–æ¨¡å—ä¸­è¢«ç»§æ‰¿ã€‚
> > 
> > open ç±»æˆå‘˜å¯ä»¥è¢«å…¶å®šä¹‰æ¨¡å—çš„å­ç±»é‡å†™ï¼Œä¹Ÿå¯ä»¥è¢«å¯¼å…¥å…¶å®šä¹‰æ¨¡å—çš„ä»»ä½•æ¨¡å—é‡å†™ã€‚
> > 
> 
> Internal è®¿é—® å…è®¸å®ä½“è¢«å®šä¹‰æ¨¡å—ä¸­çš„ä»»æ„æºæ–‡ä»¶è®¿é—®ï¼Œä½†ä¸èƒ½è¢«è¯¥æ¨¡å—ä¹‹å¤–çš„ä»»ä½•æºæ–‡ä»¶è®¿é—®ã€‚é€šå¸¸åœ¨å®šä¹‰åº”ç”¨ç¨‹åºæˆ–æ˜¯æ¡†æ¶çš„å†…éƒ¨ç»“æ„æ—¶ä½¿ç”¨ã€‚
> 
> File-private è®¿é—® å°†å®ä½“çš„ä½¿ç”¨é™åˆ¶äºå½“å‰å®šä¹‰æºæ–‡ä»¶ä¸­ã€‚å½“ä¸€äº›ç»†èŠ‚åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨ file-private è®¿é—®éšè—ç‰¹å®šåŠŸèƒ½çš„å®ç°ç»†èŠ‚ã€‚
> 
> private è®¿é—® å°†å®ä½“çš„ä½¿ç”¨é™åˆ¶äºå°é—­å£°æ˜ä¸­ã€‚å½“ä¸€äº›ç»†èŠ‚ä»…åœ¨å•ç‹¬çš„å£°æ˜ä¸­ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨ private è®¿é—®éšè—ç‰¹å®šåŠŸèƒ½çš„å®ç°ç»†èŠ‚ã€‚
> 
> open è®¿é—®æ˜¯æœ€é«˜çš„ï¼ˆé™åˆ¶æœ€å°‘ï¼‰è®¿é—®çº§åˆ«ï¼Œprivate æ˜¯æœ€ä½çš„ï¼ˆé™åˆ¶æœ€å¤šï¼‰è®¿é—®çº§åˆ«ã€‚

æ˜¾å¼åœ°æ ‡è®°ç±»ä¸º open æ„å‘³ç€ä½ è€ƒè™‘è¿‡å…¶ä»–æ¨¡å—ä½¿ç”¨è¯¥ç±»ä½œä¸ºçˆ¶ç±»å¯¹ä»£ç çš„å½±å“ï¼Œå¹¶ä¸”ç›¸åº”åœ°è®¾è®¡äº†ç±»çš„ä»£ç ã€‚






## é«˜çº§è¿ç®—ç¬¦
